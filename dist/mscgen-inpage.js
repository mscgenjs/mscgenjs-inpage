/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="umd" include="memoize,cloneDeep,flatten,defaults,assign" --development --output src/lib/lodash/lodash.custom.js`
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/*
 This file is part of mscgen_js.

 mscgen_js is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 mscgen_js is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with mscgen_js.  If not, see <http://www.gnu.org/licenses/>.
 */

!function(){var t,e,r;!function(n){function o(t,e){return v.call(t,e)}function i(t,e){var r,n,o,i,a,s,c,u,l,d,f,h,g=e&&e.split("/"),p=x.map,m=p&&p["*"]||{};if(t){for(t=t.split("/"),a=t.length-1,x.nodeIdCompat&&k.test(t[a])&&(t[a]=t[a].replace(k,"")),"."===t[0].charAt(0)&&g&&(h=g.slice(0,g.length-1),t=h.concat(t)),l=0;l<t.length;l++)if("."===(f=t[l]))t.splice(l,1),l-=1;else if(".."===f){if(0===l||1===l&&".."===t[2]||".."===t[l-1])continue;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}if((g||m)&&p){for(r=t.split("/"),l=r.length;l>0;l-=1){if(n=r.slice(0,l).join("/"),g)for(d=g.length;d>0;d-=1)if((o=p[g.slice(0,d).join("/")])&&(o=o[n])){i=o,s=l;break}if(i)break;!c&&m&&m[n]&&(c=m[n],u=l)}!i&&c&&(i=c,s=u),i&&(r.splice(0,s,i),t=r.join("/"))}return t}function a(t,e){return function(){var r=C.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),g.apply(n,r.concat([t,e]))}}function s(t){return function(e){return i(e,t)}}function c(t){return function(e){b[t]=e}}function u(t){if(o(y,t)){var e=y[t];delete y[t],w[t]=!0,h.apply(n,e)}if(!o(b,t)&&!o(w,t))throw new Error("No "+t);return b[t]}function l(t){var e,r=t?t.indexOf("!"):-1;return r>-1&&(e=t.substring(0,r),t=t.substring(r+1,t.length)),[e,t]}function d(t){return t?l(t):[]}function f(t){return function(){return x&&x.config&&x.config[t]||{}}}var h,g,p,m,b={},y={},x={},w={},v=Object.prototype.hasOwnProperty,C=[].slice,k=/\.js$/;p=function(t,e){var r,n=l(t),o=n[0],a=e[1];return t=n[1],o&&(o=i(o,a),r=u(o)),o?t=r&&r.normalize?r.normalize(t,s(a)):i(t,a):(t=i(t,a),n=l(t),o=n[0],t=n[1],o&&(r=u(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:r}},m={require:function(t){return a(t)},exports:function(t){var e=b[t];return void 0!==e?e:b[t]={}},module:function(t){return{id:t,uri:"",exports:b[t],config:f(t)}}},h=function(t,e,r,i){var s,l,f,h,g,x,v,C=[],k=typeof r;if(i=i||t,x=d(i),"undefined"===k||"function"===k){for(e=!e.length&&r.length?["require","exports","module"]:e,g=0;g<e.length;g+=1)if(h=p(e[g],x),"require"===(l=h.f))C[g]=m.require(t);else if("exports"===l)C[g]=m.exports(t),v=!0;else if("module"===l)s=C[g]=m.module(t);else if(o(b,l)||o(y,l)||o(w,l))C[g]=u(l);else{if(!h.p)throw new Error(t+" missing "+l);h.p.load(h.n,a(i,!0),c(l),{}),C[g]=b[l]}f=r?r.apply(b[t],C):void 0,t&&(s&&s.exports!==n&&s.exports!==b[t]?b[t]=s.exports:f===n&&v||(b[t]=f))}else t&&(b[t]=r)},t=e=g=function(t,e,r,o,i){if("string"==typeof t)return m[t]?m[t](e):u(p(t,d(e)).f);if(!t.splice){if(x=t,x.deps&&g(x.deps,x.callback),!e)return;e.splice?(t=e,e=r,r=null):t=n}return e=e||function(){},"function"==typeof r&&(r=o,o=i),o?h(n,t,e,r):setTimeout(function(){h(n,t,e,r)},4),g},g.config=function(t){return g(t)},t._defined=b,r=function(t,e,r){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(r=e,e=[]),o(b,t)||o(y,t)||(y[t]=[t,e,r])},r.amd={jQuery:!0}}(),r("/Users/sander/prg/js/mscgen/packages/mscgenjs-inpage/node_modules/almond/almond.js",function(){}),function(){function t(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function e(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function n(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}function o(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function i(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function a(t){return function(e){return t(e)}}function s(t,e){return null==t?Wt:t[e]}function c(t,e){return function(r){return t(e(r))}}function u(){}function l(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function d(){this.__data__=yr?yr(null):{},this.size=0}function f(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function h(t){var e=this.__data__;if(yr){var r=e[t];return r===qt?Wt:r}return Ue.call(e,t)?e[t]:Wt}function g(t){var e=this.__data__;return yr?e[t]!==Wt:Ue.call(e,t)}function p(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=yr&&e===Wt?qt:e,this}function m(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function b(){this.__data__=[],this.size=0}function y(t){var e=this.__data__,r=M(e,t);return!(r<0)&&(r==e.length-1?e.pop():or.call(e,r,1),--this.size,!0)}function x(t){var e=this.__data__,r=M(e,t);return r<0?Wt:e[r][1]}function w(t){return M(this.__data__,t)>-1}function v(t,e){var r=this.__data__,n=M(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function C(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function k(){this.size=0,this.__data__={hash:new l,map:new(gr||m),string:new l}}function A(t){var e=lt(this,t).delete(t);return this.size-=e?1:0,e}function _(t){return lt(this,t).get(t)}function T(t){return lt(this,t).has(t)}function L(t,e){var r=lt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function S(t){var e=this.__data__=new m(t);this.size=e.size}function E(){this.__data__=new m,this.size=0}function j(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function F(t){return this.__data__.get(t)}function P(t){return this.__data__.has(t)}function B(t,e){var r=this.__data__;if(r instanceof m){var n=r.__data__;if(!gr||n.length<zt-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new C(n)}return r.set(t,e),this.size=r.size,this}function D(t,e){var r=Br(t),n=!r&&Pr(t),o=!r&&!n&&Dr(t),a=!r&&!n&&!o&&Or(t),s=r||n||o||a,c=s?i(t.length,String):[],u=c.length;for(var l in t)!e&&!Ue.call(t,l)||s&&("length"==l||o&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||bt(l,u))||c.push(l);return c}function I(t,e,r){var n=t[e];Ue.call(t,e)&&Et(n,r)&&(r!==Wt||e in t)||H(t,e,r)}function M(t,e){for(var r=t.length;r--;)if(Et(t[r][0],e))return r;return-1}function O(t,e){return t&&it(e,It(e),t)}function N(t,e){return t&&it(e,Mt(e),t)}function H(t,e,r){"__proto__"==e&&sr?sr(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function R(t,r,n,o,i,a){var s,c=r&Xt,u=r&Vt,l=r&Ut;if(n&&(s=i?n(t,o,i,a):n(t)),s!==Wt)return s;if(!Bt(t))return t;var d=Br(t);if(d){if(s=ht(t),!c)return ot(t,s)}else{var f=jr(t),h=f==ee||f==re;if(Dr(t))return J(t,c);if(f==ae||f==Kt||h&&!i){if(s=u||h?{}:gt(t),!c)return u?st(t,N(s,t)):at(t,O(s,t))}else{if(!je[f])return i?t:{};s=pt(t,f,c)}}a||(a=new S);var g=a.get(t);if(g)return g;if(a.set(t,s),Mr(t))return t.forEach(function(e){s.add(R(e,r,n,e,t,a))}),s;if(Ir(t))return t.forEach(function(e,o){s.set(o,R(e,r,n,o,t,a))}),s;var p=l?u?ut:ct:u?Mt:It,m=d?Wt:p(t);return e(m||t,function(e,o){m&&(o=e,e=t[o]),I(s,o,R(e,r,n,o,t,a))}),s}function W(t,e,r,n,i){var a=-1,s=t.length;for(r||(r=mt),i||(i=[]);++a<s;){var c=t[a];e>0&&r(c)?e>1?W(c,e-1,r,n,i):o(i,c):n||(i[i.length]=c)}return i}function z(t,e,r){var n=e(t);return Br(t)?n:o(n,r(t))}function G(t){return null==t?t===Wt?fe:ie:ar&&ar in Object(t)?ft(t):kt(t)}function q(t){return Dt(t)&&G(t)==Kt}function X(t){return Dt(t)&&jr(t)==ne}function V(t){return!(!Bt(t)||wt(t))&&(Ft(t)?$e:Le).test(_t(t))}function U(t){return Dt(t)&&jr(t)==ue}function Y(t){return Dt(t)&&Pt(t.length)&&!!Ee[G(t)]}function Z(t){if(!vt(t))return lr(t);var e=[];for(var r in Object(t))Ue.call(t,r)&&"constructor"!=r&&e.push(r);return e}function $(t){if(!Bt(t))return Ct(t);var e=vt(t),r=[];for(var n in t)("constructor"!=n||!e&&Ue.call(t,n))&&r.push(n);return r}function K(t,e){return Fr(At(t,e,Nt),t+"")}function J(t,e){if(e)return t.slice();var r=t.length,n=tr?tr(r):new t.constructor(r);return t.copy(n),n}function Q(t){var e=new t.constructor(t.byteLength);return new Qe(e).set(new Qe(t)),e}function tt(t,e){var r=e?Q(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function et(t){var e=new t.constructor(t.source,Te.exec(t));return e.lastIndex=t.lastIndex,e}function rt(t){return _r?Object(_r.call(t)):{}}function nt(t,e){var r=e?Q(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function ot(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function it(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var s=e[i],c=n?n(r[s],t[s],s,r,t):Wt;c===Wt&&(c=t[s]),o?H(r,s,c):I(r,s,c)}return r}function at(t,e){return it(t,Sr(t),e)}function st(t,e){return it(t,Er(t),e)}function ct(t){return z(t,It,Sr)}function ut(t){return z(t,Mt,Er)}function lt(t,e){var r=t.__data__;return xt(e)?r["string"==typeof e?"string":"hash"]:r.map}function dt(t,e){var r=s(t,e);return V(r)?r:Wt}function ft(t){var e=Ue.call(t,ar),r=t[ar];try{t[ar]=Wt;var n=!0}catch(t){}var o=Ze.call(t);return n&&(e?t[ar]=r:delete t[ar]),o}function ht(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Ue.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function gt(t){return"function"!=typeof t.constructor||vt(t)?{}:Tr(er(t))}function pt(t,e,r){var n=t.constructor;switch(e){case ge:return Q(t);case Qt:case te:return new n(+t);case pe:return tt(t,r);case me:case be:case ye:case xe:case we:case ve:case Ce:case ke:case Ae:return nt(t,r);case ne:return new n;case oe:case le:return new n(t);case ce:return et(t);case ue:return new n;case de:return rt(t)}}function mt(t){return Br(t)||Pr(t)||!!(ir&&t&&t[ir])}function bt(t,e){var r=typeof t;return!!(e=null==e?$t:e)&&("number"==r||"symbol"!=r&&Se.test(t))&&t>-1&&t%1==0&&t<e}function yt(t,e,r){if(!Bt(r))return!1;var n=typeof e;return!!("number"==n?jt(r)&&bt(e,r.length):"string"==n&&e in r)&&Et(r[e],t)}function xt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function wt(t){return!!Ye&&Ye in t}function vt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||qe)}function Ct(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function kt(t){return Ze.call(t)}function At(e,r,n){return r=dr(r===Wt?e.length-1:r,0),function(){for(var o=arguments,i=-1,a=dr(o.length-r,0),s=Array(a);++i<a;)s[i]=o[r+i];i=-1;for(var c=Array(r+1);++i<r;)c[i]=o[i];return c[r]=n(s),t(e,this,c)}}function _t(t){if(null!=t){try{return Ve.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Tt(t){return(null==t?0:t.length)?W(t,1):[]}function Lt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Gt);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Lt.Cache||C),r}function St(t){return R(t,Xt|Ut)}function Et(t,e){return t===e||t!==t&&e!==e}function jt(t){return null!=t&&Pt(t.length)&&!Ft(t)}function Ft(t){if(!Bt(t))return!1;var e=G(t);return e==ee||e==re||e==Jt||e==se}function Pt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=$t}function Bt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Dt(t){return null!=t&&"object"==typeof t}function It(t){return jt(t)?D(t):Z(t)}function Mt(t){return jt(t)?D(t,!0):$(t)}function Ot(t){return function(){return t}}function Nt(t){return t}function Ht(){return[]}function Rt(){return!1}var Wt,zt=200,Gt="Expected a function",qt="__lodash_hash_undefined__",Xt=1,Vt=2,Ut=4,Yt=800,Zt=16,$t=9007199254740991,Kt="[object Arguments]",Jt="[object AsyncFunction]",Qt="[object Boolean]",te="[object Date]",ee="[object Function]",re="[object GeneratorFunction]",ne="[object Map]",oe="[object Number]",ie="[object Null]",ae="[object Object]",se="[object Proxy]",ce="[object RegExp]",ue="[object Set]",le="[object String]",de="[object Symbol]",fe="[object Undefined]",he="[object WeakMap]",ge="[object ArrayBuffer]",pe="[object DataView]",me="[object Float32Array]",be="[object Float64Array]",ye="[object Int8Array]",xe="[object Int16Array]",we="[object Int32Array]",ve="[object Uint8Array]",Ce="[object Uint8ClampedArray]",ke="[object Uint16Array]",Ae="[object Uint32Array]",_e=/[\\^$.*+?()[\]{}|]/g,Te=/\w*$/,Le=/^\[object .+?Constructor\]$/,Se=/^(?:0|[1-9]\d*)$/,Ee={};Ee[me]=Ee[be]=Ee[ye]=Ee[xe]=Ee[we]=Ee[ve]=Ee[Ce]=Ee[ke]=Ee[Ae]=!0,Ee[Kt]=Ee["[object Array]"]=Ee[ge]=Ee[Qt]=Ee[pe]=Ee[te]=Ee["[object Error]"]=Ee[ee]=Ee[ne]=Ee[oe]=Ee[ae]=Ee[ce]=Ee[ue]=Ee[le]=Ee[he]=!1;var je={};je[Kt]=je["[object Array]"]=je[ge]=je[pe]=je[Qt]=je[te]=je[me]=je[be]=je[ye]=je[xe]=je[we]=je[ne]=je[oe]=je[ae]=je[ce]=je[ue]=je[le]=je[de]=je[ve]=je[Ce]=je[ke]=je[Ae]=!0,je["[object Error]"]=je[ee]=je[he]=!1;var Fe="object"==typeof global&&global&&global.Object===Object&&global,Pe="object"==typeof self&&self&&self.Object===Object&&self,Be=Fe||Pe||Function("return this")(),De="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ie=De&&"object"==typeof module&&module&&!module.nodeType&&module,Me=Ie&&Ie.exports===De,Oe=Me&&Fe.process,Ne=function(){try{return Oe&&Oe.binding&&Oe.binding("util")}catch(t){}}(),He=Ne&&Ne.isMap,Re=Ne&&Ne.isSet,We=Ne&&Ne.isTypedArray,ze=Array.prototype,Ge=Function.prototype,qe=Object.prototype,Xe=Be["__core-js_shared__"],Ve=Ge.toString,Ue=qe.hasOwnProperty,Ye=function(){var t=/[^.]+$/.exec(Xe&&Xe.keys&&Xe.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ze=qe.toString,$e=RegExp("^"+Ve.call(Ue).replace(_e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=Me?Be.Buffer:Wt,Je=Be.Symbol,Qe=Be.Uint8Array,tr=Ke?Ke.allocUnsafe:Wt,er=c(Object.getPrototypeOf,Object),rr=Object.create,nr=qe.propertyIsEnumerable,or=ze.splice,ir=Je?Je.isConcatSpreadable:Wt,ar=Je?Je.toStringTag:Wt,sr=function(){try{var t=dt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),cr=Object.getOwnPropertySymbols,ur=Ke?Ke.isBuffer:Wt,lr=c(Object.keys,Object),dr=Math.max,fr=Date.now,hr=dt(Be,"DataView"),gr=dt(Be,"Map"),pr=dt(Be,"Promise"),mr=dt(Be,"Set"),br=dt(Be,"WeakMap"),yr=dt(Object,"create"),xr=_t(hr),wr=_t(gr),vr=_t(pr),Cr=_t(mr),kr=_t(br),Ar=Je?Je.prototype:Wt,_r=Ar?Ar.valueOf:Wt,Tr=function(){function t(){}return function(e){if(!Bt(e))return{};if(rr)return rr(e);t.prototype=e;var r=new t;return t.prototype=Wt,r}}();l.prototype.clear=d,l.prototype.delete=f,l.prototype.get=h,l.prototype.has=g,l.prototype.set=p,m.prototype.clear=b,m.prototype.delete=y,m.prototype.get=x,m.prototype.has=w,m.prototype.set=v,C.prototype.clear=k,C.prototype.delete=A,C.prototype.get=_,C.prototype.has=T,C.prototype.set=L,S.prototype.clear=E,S.prototype.delete=j,S.prototype.get=F,S.prototype.has=P,S.prototype.set=B;var Lr=sr?function(t,e){return sr(t,"toString",{configurable:!0,enumerable:!1,value:Ot(e),writable:!0})}:Nt,Sr=cr?function(t){return null==t?[]:(t=Object(t),n(cr(t),function(e){return nr.call(t,e)}))}:Ht,Er=cr?function(t){for(var e=[];t;)o(e,Sr(t)),t=er(t);return e}:Ht,jr=G;(hr&&jr(new hr(new ArrayBuffer(1)))!=pe||gr&&jr(new gr)!=ne||pr&&"[object Promise]"!=jr(pr.resolve())||mr&&jr(new mr)!=ue||br&&jr(new br)!=he)&&(jr=function(t){var e=G(t),r=e==ae?t.constructor:Wt,n=r?_t(r):"";if(n)switch(n){case xr:return pe;case wr:return ne;case vr:return"[object Promise]";case Cr:return ue;case kr:return he}return e});var Fr=function(t){var e=0,r=0;return function(){var n=fr(),o=Zt-(n-r);if(r=n,o>0){if(++e>=Yt)return arguments[0]}else e=0;return t.apply(Wt,arguments)}}(Lr);Lt.Cache=C;var Pr=q(function(){return arguments}())?q:function(t){return Dt(t)&&Ue.call(t,"callee")&&!nr.call(t,"callee")},Br=Array.isArray,Dr=ur||Rt,Ir=He?a(He):X,Mr=Re?a(Re):U,Or=We?a(We):Y,Nr=function(t){return K(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:Wt,a=o>2?r[2]:Wt;for(i=t.length>3&&"function"==typeof i?(o--,i):Wt,a&&yt(r[0],r[1],a)&&(i=o<3?Wt:i,o=1),e=Object(e);++n<o;){var s=r[n];s&&t(e,s,n,i)}return e})}(function(t,e){if(vt(e)||jt(e))return void it(e,It(e),t);for(var r in e)Ue.call(e,r)&&I(t,r,e[r])}),Hr=K(function(t,e){t=Object(t);var r=-1,n=e.length,o=n>2?e[2]:Wt;for(o&&yt(e[0],e[1],o)&&(n=1);++r<n;)for(var i=e[r],a=Mt(i),s=-1,c=a.length;++s<c;){var u=a[s],l=t[u];(l===Wt||Et(l,qe[u])&&!Ue.call(t,u))&&(t[u]=i[u])}return t});u.assign=Nr,u.constant=Ot,u.defaults=Hr,u.flatten=Tt,u.keys=It,u.keysIn=Mt,u.memoize=Lt,u.cloneDeep=St,u.eq=Et,u.identity=Nt,u.isArguments=Pr,u.isArray=Br,u.isArrayLike=jt,u.isBuffer=Dr,u.isFunction=Ft,u.isLength=Pt,u.isMap=Ir,u.isObject=Bt,u.isObjectLike=Dt,u.isSet=Mr,u.isTypedArray=Or,u.stubArray=Ht,u.stubFalse=Rt,u.VERSION="4.17.5","function"==typeof r&&"object"==typeof r.amd&&r.amd?(Be._=u,r("lib/mscgenjs-core/lib/lodash/lodash.custom",[],function(){return u})):Ie?((Ie.exports=u)._=u,De._=u):Be._=u}.call(this),r("lib/mscgenjs-core/parse/parserHelpers",[],function(){function t(t,e){var r={};return r[t.toLowerCase()]=e,r}function e(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function r(t,e){return void 0===e||"*"===e||t.some(function(t){return t.name===e})}function n(t){return["box","abox","rbox","note","msc","hscale","width","arcgradient","wordwraparcs","label","color","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"].indexOf(t)>-1}function o(t,e){return"Entity '"+t+"' in arc '"+e.from+" "+e.kind+" "+e.to+"' is not defined."}function i(t,e){this.name="EntityNotDefinedError",this.message=o(t,e)}function a(t,e){(e||[]).forEach(function(e){e.forEach(function(e){if(e.from&&!r(t,e.from))throw new i(e.from,e);if(e.to&&!r(t,e.to))throw new i(e.to,e);e.arcs&&a(t,e.arcs)})})}function s(t){return!!t&&(t.hasOwnProperty("watermark")||t.hasOwnProperty("wordwrapentities")||t.hasOwnProperty("wordwrapboxes")||t.hasOwnProperty("width")&&"auto"===t.width)}function c(t){return(t||[]).some(function(t){return t.some(function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(t.kind)>-1})})}function u(t,e){var r=s(t),n=c(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}return{nameValue2Option:t,flattenBoolean:e,entityExists:r,EntityNotDefinedError:i,checkForUndeclaredEntities:a,isMscGenKeyword:n,getMetaInfo:u}}),function(t,n){"function"==typeof r&&r.amd?r("lib/mscgenjs-core/parse/xuparser",["../lib/lodash/lodash.custom","./parserHelpers"],n):"object"==typeof module&&module.exports&&(module.exports=n(e("../lib/lodash/lodash.custom"),e("./parserHelpers")))}(0,function(t,e){"use strict";function r(t,e,n,o){this.message=t,this.expected=e,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}function n(n,o){function i(t,e){throw e=void 0!==e?e:l(ei,ti),f(t,e)}function a(t,e){return{type:"literal",text:t,ignoreCase:e}}function s(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function c(t){return{type:"other",description:t}}function u(t){var e,r=ri[t];if(r)return r;for(e=t-1;!ri[e];)e--;for(r=ri[e],r={line:r.line,column:r.column};e<t;)10===n.charCodeAt(e)?(r.line++,r.column=1):r.column++,e++;return ri[t]=r,r}function l(t,e){var r=u(t),n=u(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function d(t){ti<ni||(ti>ni&&(ni=ti,oi=[]),oi.push(t))}function f(t,e){return new r(t,null,null,e)}function h(t,e,n){return new r(r.buildMessage(t,e),t,e,n)}function g(){var t,e,r,o,i,a,s,c,u,l;return t=ti,e=tt(),e!==ht?(r=p(),r!==ht?(o=tt(),o!==ht?(123===n.charCodeAt(ti)?(i=mt,ti++):(i=ht,0===ii&&d(bt)),i!==ht?(a=tt(),a!==ht?(s=m(),s!==ht?(c=tt(),c!==ht?(125===n.charCodeAt(ti)?(u=yt,ti++):(u=ht,0===ii&&d(xt)),u!==ht?(l=tt(),l!==ht?(ei=t,e=wt(e,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function p(){var t;return n.substr(ti,3).toLowerCase()===vt?(t=n.substr(ti,3),ti+=3):(t=ht,0===ii&&d(Ct)),t===ht&&(n.substr(ti,2).toLowerCase()===kt?(t=n.substr(ti,2),ti+=2):(t=ht,0===ii&&d(At))),t}function m(){var t,e,r,n;return t=ti,e=b(),e===ht&&(e=null),e!==ht?(r=x(),r===ht&&(r=null),r!==ht?(n=v(),n===ht&&(n=null),n!==ht?(ei=t,e=_t(e,r,n),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function b(){var t,e,r,o,i,a;for(t=ti,e=ti,r=[],o=ti,i=y(),i!==ht?(44===n.charCodeAt(ti)?(a=Tt,ti++):(a=ht,0===ii&&d(Lt)),a!==ht?(ei=o,i=St(i),o=i):(ti=o,o=ht)):(ti=o,o=ht);o!==ht;)r.push(o),o=ti,i=y(),i!==ht?(44===n.charCodeAt(ti)?(a=Tt,ti++):(a=ht,0===ii&&d(Lt)),a!==ht?(ei=o,i=St(i),o=i):(ti=o,o=ht)):(ti=o,o=ht);return r!==ht?(o=ti,i=y(),i!==ht?(59===n.charCodeAt(ti)?(a=Et,ti++):(a=ht,0===ii&&d(jt)),a!==ht?(ei=o,i=St(i),o=i):(ti=o,o=ht)):(ti=o,o=ht),o!==ht?(r=[r,o],e=r):(ti=e,e=ht)):(ti=e,e=ht),e!==ht&&(ei=t,e=Ft(e)),t=e}function y(){var t,e,r,o,i,a,s,c;return ii++,t=ti,e=tt(),e!==ht?(n.substr(ti,6).toLowerCase()===Bt?(r=n.substr(ti,6),ti+=6):(r=ht,0===ii&&d(Dt)),r===ht&&(n.substr(ti,11).toLowerCase()===It?(r=n.substr(ti,11),ti+=11):(r=ht,0===ii&&d(Mt))),r!==ht?(o=tt(),o!==ht?(61===n.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&d(Nt)),i!==ht?(a=tt(),a!==ht?(s=et(),s!==ht?(c=tt(),c!==ht?(ei=t,e=Ht(r,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(n.substr(ti,5).toLowerCase()===Rt?(r=n.substr(ti,5),ti+=5):(r=ht,0===ii&&d(Wt)),r!==ht?(o=tt(),o!==ht?(61===n.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&d(Nt)),i!==ht?(a=tt(),a!==ht?(s=ut(),s!==ht?(c=tt(),c!==ht?(ei=t,e=Ht(r,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(n.substr(ti,12).toLowerCase()===zt?(r=n.substr(ti,12),ti+=12):(r=ht,0===ii&&d(Gt)),r!==ht?(o=tt(),o!==ht?(61===n.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&d(Nt)),i!==ht?(a=tt(),a!==ht?(s=at(),s!==ht?(c=tt(),c!==ht?(ei=t,e=qt(r,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(n.substr(ti,16).toLowerCase()===Xt?(r=n.substr(ti,16),ti+=16):(r=ht,0===ii&&d(Vt)),r!==ht?(o=tt(),o!==ht?(61===n.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&d(Nt)),i!==ht?(a=tt(),a!==ht?(s=at(),s!==ht?(c=tt(),c!==ht?(ei=t,e=qt(r,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(n.substr(ti,13).toLowerCase()===Ut?(r=n.substr(ti,13),ti+=13):(r=ht,0===ii&&d(Yt)),r!==ht?(o=tt(),o!==ht?(61===n.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&d(Nt)),i!==ht?(a=tt(),a!==ht?(s=at(),s!==ht?(c=tt(),c!==ht?(ei=t,e=qt(r,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(n.substr(ti,9).toLowerCase()===Zt?(r=n.substr(ti,9),ti+=9):(r=ht,0===ii&&d($t)),r!==ht?(o=tt(),o!==ht?(61===n.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&d(Nt)),i!==ht?(a=tt(),a!==ht?(s=R(),s!==ht?(c=tt(),c!==ht?(ei=t,e=Ht(r,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)))))),ii--,t===ht&&(e=ht,0===ii&&d(Pt)),t}function x(){var t,e,r,o,i,a;for(t=ti,e=ti,r=[],o=ti,i=w(),i!==ht?(44===n.charCodeAt(ti)?(a=Tt,ti++):(a=ht,0===ii&&d(Lt)),a!==ht?(ei=o,i=Kt(i),o=i):(ti=o,o=ht)):(ti=o,o=ht);o!==ht;)r.push(o),o=ti,i=w(),i!==ht?(44===n.charCodeAt(ti)?(a=Tt,ti++):(a=ht,0===ii&&d(Lt)),a!==ht?(ei=o,i=Kt(i),o=i):(ti=o,o=ht)):(ti=o,o=ht);return r!==ht?(o=ti,i=w(),i!==ht?(59===n.charCodeAt(ti)?(a=Et,ti++):(a=ht,0===ii&&d(jt)),a!==ht?(ei=o,i=Kt(i),o=i):(ti=o,o=ht)):(ti=o,o=ht),o!==ht?(r=[r,o],e=r):(ti=e,e=ht)):(ti=e,e=ht),e!==ht&&(ei=t,e=Jt(e)),t=e}function w(){var t,e,r,o,i,a,s,c;return ii++,t=ti,e=tt(),e!==ht?(r=R(),r!==ht?(o=tt(),o!==ht?(i=ti,91===n.charCodeAt(ti)?(a=te,ti++):(a=ht,0===ii&&d(ee)),a!==ht?(s=O(),s!==ht?(93===n.charCodeAt(ti)?(c=re,ti++):(c=ht,0===ii&&d(ne)),c!==ht?(ei=i,a=oe(r,s),i=a):(ti=i,i=ht)):(ti=i,i=ht)):(ti=i,i=ht),i===ht&&(i=null),i!==ht?(a=tt(),a!==ht?(ei=t,e=ie(r,i),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(r=G(),r!==ht?(o=tt(),o!==ht?(i=ti,91===n.charCodeAt(ti)?(a=te,ti++):(a=ht,0===ii&&d(ee)),a!==ht?(s=O(),s!==ht?(93===n.charCodeAt(ti)?(c=re,ti++):(c=ht,0===ii&&d(ne)),c!==ht?(ei=i,a=oe(r,s),i=a):(ti=i,i=ht)):(ti=i,i=ht)):(ti=i,i=ht),i===ht&&(i=null),i!==ht?(a=tt(),a!==ht?(ei=t,e=ae(r,i),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)),ii--,t===ht&&(e=ht,0===ii&&d(Qt)),t}function v(){var t,e,r,o,i;if(t=[],e=ti,r=C(),r!==ht?(o=tt(),o!==ht?(59===n.charCodeAt(ti)?(i=Et,ti++):(i=ht,0===ii&&d(jt)),i!==ht?(ei=e,r=se(r),e=r):(ti=e,e=ht)):(ti=e,e=ht)):(ti=e,e=ht),e!==ht)for(;e!==ht;)t.push(e),e=ti,r=C(),r!==ht?(o=tt(),o!==ht?(59===n.charCodeAt(ti)?(i=Et,ti++):(i=ht,0===ii&&d(jt)),i!==ht?(ei=e,r=se(r),e=r):(ti=e,e=ht)):(ti=e,e=ht)):(ti=e,e=ht);else t=ht;return t}function C(){var t,e,r,o,i,a,s;for(t=ti,e=ti,r=[],o=ti,i=k(),i!==ht?(a=tt(),a!==ht?(44===n.charCodeAt(ti)?(s=Tt,ti++):(s=ht,0===ii&&d(Lt)),s!==ht?(ei=o,i=se(i),o=i):(ti=o,o=ht)):(ti=o,o=ht)):(ti=o,o=ht);o!==ht;)r.push(o),o=ti,i=k(),i!==ht?(a=tt(),a!==ht?(44===n.charCodeAt(ti)?(s=Tt,ti++):(s=ht,0===ii&&d(Lt)),s!==ht?(ei=o,i=se(i),o=i):(ti=o,o=ht)):(ti=o,o=ht)):(ti=o,o=ht);return r!==ht?(o=ti,i=k(),i!==ht&&(ei=o,i=se(i)),o=i,o!==ht?(r=[r,o],e=r):(ti=e,e=ht)):(ti=e,e=ht),e!==ht&&(ei=t,e=ce(e)),t=e}function k(){var t;return t=A(),t===ht&&(t=S()),t}function A(){var t,e,r,o,i,a;return t=ti,e=ti,r=_(),r!==ht&&(ei=e,r=se(r)),e=r,e===ht&&(e=ti,r=L(),r!==ht&&(ei=e,r=se(r)),(e=r)===ht&&(e=ti,r=T(),r!==ht&&(ei=e,r=se(r)),e=r)),e!==ht?(r=ti,91===n.charCodeAt(ti)?(o=te,ti++):(o=ht,0===ii&&d(ee)),o!==ht?(i=O(),i!==ht?(93===n.charCodeAt(ti)?(a=re,ti++):(a=ht,0===ii&&d(ne)),a!==ht?(ei=r,o=ue(e,i),r=o):(ti=r,r=ht)):(ti=r,r=ht)):(ti=r,r=ht),r===ht&&(r=null),r!==ht?(ei=t,e=le(e,r),t=e):(ti=t,t=ht)):(ti=t,t=ht),t}function _(){var t,e,r,n;return t=ti,e=tt(),e!==ht?(r=E(),r!==ht?(n=tt(),n!==ht?(ei=t,e=de(r),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function T(){var t,e,r,n;return t=ti,e=tt(),e!==ht?(r=j(),r!==ht?(n=tt(),n!==ht?(ei=t,e=de(r),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function L(){var t,e,r,o,i,a,s,c;return t=ti,e=tt(),e!==ht?(r=z(),r!==ht?(o=tt(),o!==ht?(i=F(),i!==ht?(a=tt(),a!==ht?(s=z(),s!==ht?(c=tt(),c!==ht?(ei=t,e=fe(r,i,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(42===n.charCodeAt(ti)?(r=he,ti++):(r=ht,0===ii&&d(ge)),r!==ht?(o=tt(),o!==ht?(i=D(),i!==ht?(a=tt(),a!==ht?(s=z(),s!==ht?(c=tt(),c!==ht?(ei=t,e=pe(i,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(r=z(),r!==ht?(o=tt(),o!==ht?(i=B(),i!==ht?(a=tt(),a!==ht?(42===n.charCodeAt(ti)?(s=he,ti++):(s=ht,0===ii&&d(ge)),s!==ht?(c=tt(),c!==ht?(ei=t,e=me(r,i),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t===ht&&(t=ti,e=tt(),e!==ht?(r=z(),r!==ht?(o=tt(),o!==ht?(i=P(),i!==ht?(a=tt(),a!==ht?(42===n.charCodeAt(ti)?(s=he,ti++):(s=ht,0===ii&&d(ge)),s!==ht?(c=tt(),c!==ht?(ei=t,e=me(r,i),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)))),t}function S(){var t,e,r,o,i,a,s,c,u,l,f,h,g,p,m,b;return t=ti,e=tt(),e!==ht?(r=z(),r!==ht?(o=tt(),o!==ht?(i=M(),i!==ht?(a=tt(),a!==ht?(s=z(),s!==ht?(c=tt(),c!==ht?(u=ti,91===n.charCodeAt(ti)?(l=te,ti++):(l=ht,0===ii&&d(ee)),l!==ht?(f=O(),f!==ht?(93===n.charCodeAt(ti)?(h=re,ti++):(h=ht,0===ii&&d(ne)),h!==ht?(ei=u,l=be(r,i,s,f),u=l):(ti=u,u=ht)):(ti=u,u=ht)):(ti=u,u=ht),u===ht&&(u=null),u!==ht?(l=tt(),l!==ht?(123===n.charCodeAt(ti)?(f=mt,ti++):(f=ht,0===ii&&d(bt)),f!==ht?(h=tt(),h!==ht?(g=v(),g===ht&&(g=null),g!==ht?(p=tt(),p!==ht?(125===n.charCodeAt(ti)?(m=yt,ti++):(m=ht,0===ii&&d(xt)),m!==ht?(b=tt(),b!==ht?(ei=t,e=ye(r,i,s,u,g),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function E(){var t;return ii++,n.substr(ti,3)===we?(t=we,ti+=3):(t=ht,0===ii&&d(ve)),t===ht&&(n.substr(ti,3)===Ce?(t=Ce,ti+=3):(t=ht,0===ii&&d(ke))),ii--,t===ht&&(ht,0===ii&&d(xe)),t}function j(){var t;return ii++,n.substr(ti,3)===_e?(t=_e,ti+=3):(t=ht,0===ii&&d(Te)),ii--,t===ht&&(ht,0===ii&&d(Ae)),t}function F(){var t,e;return t=ti,e=P(),e===ht&&(e=B())===ht&&(e=D())===ht&&(e=I()),e!==ht&&(ei=t,e=Le(e)),t=e}function P(){var t;return ii++,n.substr(ti,2)===Ee?(t=Ee,ti+=2):(t=ht,0===ii&&d(je)),t===ht&&(n.substr(ti,3)===Fe?(t=Fe,ti+=3):(t=ht,0===ii&&d(Pe)),t===ht&&(n.substr(ti,2)===Be?(t=Be,ti+=2):(t=ht,0===ii&&d(De)),t===ht&&(n.substr(ti,5)===Ie?(t=Ie,ti+=5):(t=ht,0===ii&&d(Me)),t===ht&&(n.substr(ti,3)===Oe?(t=Oe,ti+=3):(t=ht,0===ii&&d(Ne)),t===ht&&(n.substr(ti,2)===He?(t=He,ti+=2):(t=ht,0===ii&&d(Re)),t===ht&&(n.substr(ti,4)===We?(t=We,ti+=4):(t=ht,0===ii&&d(ze)),t===ht&&(n.substr(ti,2)===Ge?(t=Ge,ti+=2):(t=ht,0===ii&&d(qe)),t===ht&&(n.substr(ti,3)===Xe?(t=Xe,ti+=3):(t=ht,0===ii&&d(Ve)))))))))),ii--,t===ht&&(ht,0===ii&&d(Se)),t}function B(){var t;return ii++,n.substr(ti,2)===Ye?(t=Ye,ti+=2):(t=ht,0===ii&&d(Ze)),t===ht&&(n.substr(ti,3)===$e?(t=$e,ti+=3):(t=ht,0===ii&&d(Ke)),t===ht&&(n.substr(ti,2)===Je?(t=Je,ti+=2):(t=ht,0===ii&&d(Qe)),t===ht&&(n.substr(ti,2)===tr?(t=tr,ti+=2):(t=ht,0===ii&&d(er)),t===ht&&(n.substr(ti,2)===rr?(t=rr,ti+=2):(t=ht,0===ii&&d(nr)),t===ht&&(n.substr(ti,2).toLowerCase()===or?(t=n.substr(ti,2),ti+=2):(t=ht,0===ii&&d(ir))))))),ii--,t===ht&&(ht,0===ii&&d(Ue)),t}function D(){var t;return ii++,n.substr(ti,2)===sr?(t=sr,ti+=2):(t=ht,0===ii&&d(cr)),t===ht&&(n.substr(ti,3)===ur?(t=ur,ti+=3):(t=ht,0===ii&&d(lr)),t===ht&&(n.substr(ti,2)===dr?(t=dr,ti+=2):(t=ht,0===ii&&d(fr)),t===ht&&(n.substr(ti,2)===hr?(t=hr,ti+=2):(t=ht,0===ii&&d(gr)),t===ht&&(n.substr(ti,2)===pr?(t=pr,ti+=2):(t=ht,0===ii&&d(mr)),t===ht&&(n.substr(ti,2).toLowerCase()===br?(t=n.substr(ti,2),ti+=2):(t=ht,0===ii&&d(yr))))))),ii--,t===ht&&(ht,0===ii&&d(ar)),t}function I(){var t;return ii++,n.substr(ti,4).toLowerCase()===wr?(t=n.substr(ti,4),ti+=4):(t=ht,0===ii&&d(vr)),t===ht&&(n.substr(ti,4).toLowerCase()===Cr?(t=n.substr(ti,4),ti+=4):(t=ht,0===ii&&d(kr)),t===ht&&(n.substr(ti,4).toLowerCase()===Ar?(t=n.substr(ti,4),ti+=4):(t=ht,0===ii&&d(_r)),t===ht&&(n.substr(ti,3).toLowerCase()===Tr?(t=n.substr(ti,3),ti+=3):(t=ht,0===ii&&d(Lr))))),ii--,t===ht&&(ht,0===ii&&d(xr)),t}function M(){var t,e;return ii++,t=ti,n.substr(ti,3).toLowerCase()===Er?(e=n.substr(ti,3),ti+=3):(e=ht,0===ii&&d(jr)),e===ht&&(n.substr(ti,4).toLowerCase()===Fr?(e=n.substr(ti,4),ti+=4):(e=ht,0===ii&&d(Pr)),e===ht&&(n.substr(ti,3).toLowerCase()===Br?(e=n.substr(ti,3),ti+=3):(e=ht,0===ii&&d(Dr)),e===ht&&(n.substr(ti,5).toLowerCase()===Ir?(e=n.substr(ti,5),ti+=5):(e=ht,0===ii&&d(Mr)),e===ht&&(n.substr(ti,3).toLowerCase()===Or?(e=n.substr(ti,3),ti+=3):(e=ht,0===ii&&d(Nr)),e===ht&&(n.substr(ti,3).toLowerCase()===Hr?(e=n.substr(ti,3),ti+=3):(e=ht,0===ii&&d(Rr)),e===ht&&(n.substr(ti,6).toLowerCase()===Wr?(e=n.substr(ti,6),ti+=6):(e=ht,0===ii&&d(zr)),e===ht&&(n.substr(ti,3).toLowerCase()===Gr?(e=n.substr(ti,3),ti+=3):(e=ht,0===ii&&d(qr)),e===ht&&(n.substr(ti,8).toLowerCase()===Xr?(e=n.substr(ti,8),ti+=8):(e=ht,0===ii&&d(Vr)),e===ht&&(n.substr(ti,6).toLowerCase()===Ur?(e=n.substr(ti,6),ti+=6):(e=ht,0===ii&&d(Yr)),e===ht&&(n.substr(ti,8).toLowerCase()===Zr?(e=n.substr(ti,8),ti+=8):(e=ht,0===ii&&d($r)),e===ht&&(n.substr(ti,6).toLowerCase()===Kr?(e=n.substr(ti,6),ti+=6):(e=ht,0===ii&&d(Jr)),e===ht&&(n.substr(ti,4).toLowerCase()===Qr?(e=n.substr(ti,4),ti+=4):(e=ht,0===ii&&d(tn)),e===ht&&(n.substr(ti,3).toLowerCase()===en?(e=n.substr(ti,3),ti+=3):(e=ht,0===ii&&d(rn)),e===ht&&(n.substr(ti,3).toLowerCase()===nn?(e=n.substr(ti,3),ti+=3):(e=ht,0===ii&&d(on)))))))))))))))),e!==ht&&(ei=t,e=an(e)),t=e,ii--,t===ht&&(e=ht,0===ii&&d(Sr)),t}function O(){var t,e,r,o,i,a;for(t=ti,e=ti,r=[],o=ti,i=N(),i!==ht?(44===n.charCodeAt(ti)?(a=Tt,ti++):(a=ht,0===ii&&d(Lt)),a!==ht?(ei=o,i=se(i),o=i):(ti=o,o=ht)):(ti=o,o=ht);o!==ht;)r.push(o),o=ti,i=N(),i!==ht?(44===n.charCodeAt(ti)?(a=Tt,ti++):(a=ht,0===ii&&d(Lt)),a!==ht?(ei=o,i=se(i),o=i):(ti=o,o=ht)):(ti=o,o=ht);return r!==ht?(o=ti,i=N(),i!==ht&&(ei=o,i=se(i)),o=i,o!==ht?(r=[r,o],e=r):(ti=e,
e=ht)):(ti=e,e=ht),e!==ht&&(ei=t,e=sn(e)),t=e}function N(){var t,e,r,o,i,a,s,c;return t=ti,e=tt(),e!==ht?(r=H(),r!==ht?(o=tt(),o!==ht?(61===n.charCodeAt(ti)?(i=Ot,ti++):(i=ht,0===ii&&d(Nt)),i!==ht?(a=tt(),a!==ht?(s=z(),s!==ht?(c=tt(),c!==ht?(ei=t,e=cn(r,s),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function H(){var t;return ii++,n.substr(ti,5).toLowerCase()===ln?(t=n.substr(ti,5),ti+=5):(t=ht,0===ii&&d(dn)),t===ht&&(n.substr(ti,5).toLowerCase()===fn?(t=n.substr(ti,5),ti+=5):(t=ht,0===ii&&d(hn)),t===ht&&(n.substr(ti,2).toLowerCase()===gn?(t=n.substr(ti,2),ti+=2):(t=ht,0===ii&&d(pn)),t===ht&&(n.substr(ti,3).toLowerCase()===mn?(t=n.substr(ti,3),ti+=3):(t=ht,0===ii&&d(bn)),t===ht&&(n.substr(ti,9).toLowerCase()===yn?(t=n.substr(ti,9),ti+=9):(t=ht,0===ii&&d(xn)),t===ht&&(n.substr(ti,10).toLowerCase()===wn?(t=n.substr(ti,10),ti+=10):(t=ht,0===ii&&d(vn)),t===ht&&(n.substr(ti,9).toLowerCase()===Cn?(t=n.substr(ti,9),ti+=9):(t=ht,0===ii&&d(kn)),t===ht&&(n.substr(ti,10).toLowerCase()===An?(t=n.substr(ti,10),ti+=10):(t=ht,0===ii&&d(_n)),t===ht&&(n.substr(ti,11).toLowerCase()===Tn?(t=n.substr(ti,11),ti+=11):(t=ht,0===ii&&d(Ln)),t===ht&&(n.substr(ti,12).toLowerCase()===Sn?(t=n.substr(ti,12),ti+=12):(t=ht,0===ii&&d(En)),t===ht&&(n.substr(ti,12).toLowerCase()===jn?(t=n.substr(ti,12),ti+=12):(t=ht,0===ii&&d(Fn)),t===ht&&(n.substr(ti,13).toLowerCase()===Pn?(t=n.substr(ti,13),ti+=13):(t=ht,0===ii&&d(Bn)),t===ht&&(n.substr(ti,12).toLowerCase()===Dn?(t=n.substr(ti,12),ti+=12):(t=ht,0===ii&&d(In)),t===ht&&(n.substr(ti,13).toLowerCase()===Mn?(t=n.substr(ti,13),ti+=13):(t=ht,0===ii&&d(On)),t===ht&&(n.substr(ti,14).toLowerCase()===Nn?(t=n.substr(ti,14),ti+=14):(t=ht,0===ii&&d(Hn)),t===ht&&(n.substr(ti,15).toLowerCase()===Rn?(t=n.substr(ti,15),ti+=15):(t=ht,0===ii&&d(Wn)),t===ht&&(n.substr(ti,7).toLowerCase()===zn?(t=n.substr(ti,7),ti+=7):(t=ht,0===ii&&d(Gn)),t===ht&&(n.substr(ti,5).toLowerCase()===qn?(t=n.substr(ti,5),ti+=5):(t=ht,0===ii&&d(Xn))))))))))))))))))),ii--,t===ht&&(ht,0===ii&&d(un)),t}function R(){var t,e,r,o;return ii++,t=ti,34===n.charCodeAt(ti)?(e=Un,ti++):(e=ht,0===ii&&d(Yn)),e!==ht?(r=W(),r!==ht?(34===n.charCodeAt(ti)?(o=Un,ti++):(o=ht,0===ii&&d(Yn)),o!==ht?(ei=t,e=Zn(r),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),ii--,t===ht&&(e=ht,0===ii&&d(Vn)),t}function W(){var t,e,r,o;for(t=[],e=ti,r=ti,ii++,34===n.charCodeAt(ti)?(o=Un,ti++):(o=ht,0===ii&&d(Yn)),ii--,o===ht?r=void 0:(ti=r,r=ht),r!==ht?(n.substr(ti,2)===$n?(o=$n,ti+=2):(o=ht,0===ii&&d(Kn)),o===ht&&(n.length>ti?(o=n.charAt(ti),ti++):(o=ht,0===ii&&d(Jn))),o!==ht?(ei=e,r=Qn(o),e=r):(ti=e,e=ht)):(ti=e,e=ht);e!==ht;)t.push(e),e=ti,r=ti,ii++,34===n.charCodeAt(ti)?(o=Un,ti++):(o=ht,0===ii&&d(Yn)),ii--,o===ht?r=void 0:(ti=r,r=ht),r!==ht?(n.substr(ti,2)===$n?(o=$n,ti+=2):(o=ht,0===ii&&d(Kn)),o===ht&&(n.length>ti?(o=n.charAt(ti),ti++):(o=ht,0===ii&&d(Jn))),o!==ht?(ei=e,r=Qn(o),e=r):(ti=e,e=ht)):(ti=e,e=ht);return t}function z(){var t;return ii++,t=G(),t===ht&&(t=R()),ii--,t===ht&&(ht,0===ii&&d(to)),t}function G(){var t,e,r;if(t=ti,e=[],eo.test(n.charAt(ti))?(r=n.charAt(ti),ti++):(r=ht,0===ii&&d(ro)),r!==ht)for(;r!==ht;)e.push(r),eo.test(n.charAt(ti))?(r=n.charAt(ti),ti++):(r=ht,0===ii&&d(ro));else e=ht;return e!==ht&&(ei=t,e=no(e)),t=e}function q(){var t,e;return ii++,t=ti,io.test(n.charAt(ti))?(e=n.charAt(ti),ti++):(e=ht,0===ii&&d(ao)),e!==ht&&(ei=t,e=Qn(e)),t=e,ii--,t===ht&&(e=ht,0===ii&&d(oo)),t}function X(){var t,e;return ii++,t=ti,co.test(n.charAt(ti))?(e=n.charAt(ti),ti++):(e=ht,0===ii&&d(uo)),e!==ht&&(ei=t,e=Qn(e)),t=e,ii--,t===ht&&(e=ht,0===ii&&d(so)),t}function V(){var t;return n.substr(ti,2)===lo?(t=lo,ti+=2):(t=ht,0===ii&&d(fo)),t}function U(){var t;return n.substr(ti,2)===ho?(t=ho,ti+=2):(t=ht,0===ii&&d(go)),t}function Y(){var t,e,r;return t=ti,e=ti,ii++,n.substr(ti,2)===ho?(r=ho,ti+=2):(r=ht,0===ii&&d(go)),ii--,r===ht?e=void 0:(ti=e,e=ht),e!==ht?(n.length>ti?(r=n.charAt(ti),ti++):(r=ht,0===ii&&d(Jn)),r!==ht?(ei=t,e=Qn(r),t=e):(ti=t,t=ht)):(ti=t,t=ht),t}function Z(){var t,e,r,n;if(t=ti,(e=V())!==ht){for(r=[],n=Y();n!==ht;)r.push(n),n=Y();r!==ht?(n=U(),n!==ht?(ei=t,e=po(e,r,n),t=e):(ti=t,t=ht)):(ti=t,t=ht)}else ti=t,t=ht;return t}function $(){var t;return n.substr(ti,2)===mo?(t=mo,ti+=2):(t=ht,0===ii&&d(bo)),t===ht&&(35===n.charCodeAt(ti)?(t=yo,ti++):(t=ht,0===ii&&d(xo))),t}function K(){var t;return wo.test(n.charAt(ti))?(t=n.charAt(ti),ti++):(t=ht,0===ii&&d(vo)),t}function J(){var t,e,r,n;if(t=ti,(e=$())!==ht){for(r=[],n=K();n!==ht;)r.push(n),n=K();r!==ht?(ei=t,e=Co(e,r),t=e):(ti=t,t=ht)}else ti=t,t=ht;return t}function Q(){var t;return ii++,t=J(),t===ht&&(t=Z()),ii--,t===ht&&(ht,0===ii&&d(ko)),t}function tt(){var t,e;for(t=[],e=q(),e===ht&&(e=X())===ht&&(e=Q());e!==ht;)t.push(e),(e=q())===ht&&(e=X())===ht&&(e=Q());return t}function et(){var t,e;return ii++,t=ti,e=rt(),e!==ht&&(ei=t,e=_o(e)),t=e,t===ht&&(t=ti,e=nt(),e!==ht&&(ei=t,e=To(e)),t=e),ii--,t===ht&&(e=ht,0===ii&&d(Ao)),t}function rt(){var t,e,r,o;return t=ti,34===n.charCodeAt(ti)?(e=Un,ti++):(e=ht,0===ii&&d(Yn)),e!==ht?(r=nt(),r!==ht?(34===n.charCodeAt(ti)?(o=Un,ti++):(o=ht,0===ii&&d(Yn)),o!==ht?(ei=t,e=Lo(r),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function nt(){var t;return t=it(),t===ht&&(t=ot()),t}function ot(){var t,e,r;if(t=ti,e=[],So.test(n.charAt(ti))?(r=n.charAt(ti),ti++):(r=ht,0===ii&&d(Eo)),r!==ht)for(;r!==ht;)e.push(r),So.test(n.charAt(ti))?(r=n.charAt(ti),ti++):(r=ht,0===ii&&d(Eo));else e=ht;return e!==ht&&(ei=t,e=jo(e)),t=e}function it(){var t,e,r,o,i;return t=ti,e=ti,r=ot(),r!==ht?(46===n.charCodeAt(ti)?(o=Fo,ti++):(o=ht,0===ii&&d(Po)),o!==ht?(i=ot(),i!==ht?(r=[r,o,i],e=r):(ti=e,e=ht)):(ti=e,e=ht)):(ti=e,e=ht),e!==ht&&(ei=t,e=Bo(e)),t=e}function at(){var t,e;return ii++,t=ti,e=st(),e!==ht&&(ei=t,e=Io(e)),t=e,t===ht&&(t=ti,e=ct(),e!==ht&&(ei=t,e=Mo(e)),t=e),ii--,t===ht&&(e=ht,0===ii&&d(Do)),t}function st(){var t,e,r,o;return t=ti,34===n.charCodeAt(ti)?(e=Un,ti++):(e=ht,0===ii&&d(Yn)),e!==ht?(r=ct(),r!==ht?(34===n.charCodeAt(ti)?(o=Un,ti++):(o=ht,0===ii&&d(Yn)),o!==ht?(ei=t,e=_o(r),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function ct(){var t;return n.substr(ti,4).toLowerCase()===Oo?(t=n.substr(ti,4),ti+=4):(t=ht,0===ii&&d(No)),t===ht&&(n.substr(ti,5).toLowerCase()===Ho?(t=n.substr(ti,5),ti+=5):(t=ht,0===ii&&d(Ro)),t===ht&&(n.substr(ti,2).toLowerCase()===Wo?(t=n.substr(ti,2),ti+=2):(t=ht,0===ii&&d(zo)),t===ht&&(n.substr(ti,3).toLowerCase()===Go?(t=n.substr(ti,3),ti+=3):(t=ht,0===ii&&d(qo)),t===ht&&(48===n.charCodeAt(ti)?(t=Xo,ti++):(t=ht,0===ii&&d(Vo)),t===ht&&(49===n.charCodeAt(ti)?(t=Uo,ti++):(t=ht,0===ii&&d(Yo))))))),t}function ut(){var t;return ii++,t=lt(),t===ht&&(t=dt()),ii--,t===ht&&(ht,0===ii&&d(Zo)),t}function lt(){var t,e,r,o;return t=ti,34===n.charCodeAt(ti)?(e=Un,ti++):(e=ht,0===ii&&d(Yn)),e!==ht?(r=dt(),r!==ht?(34===n.charCodeAt(ti)?(o=Un,ti++):(o=ht,0===ii&&d(Yn)),o!==ht?(ei=t,e=_o(r),t=e):(ti=t,t=ht)):(ti=t,t=ht)):(ti=t,t=ht),t}function dt(){var t,e;return t=ti,e=nt(),e!==ht&&(ei=t,e=$o(e)),t=e,t===ht&&(t=ti,n.substr(ti,4).toLowerCase()===Ko?(e=n.substr(ti,4),ti+=4):(e=ht,0===ii&&d(Jo)),e!==ht&&(ei=t,e=Qo(e)),t=e),t}o=void 0!==o?o:{};var ft,ht={},gt={program:g},pt=g,mt="{",bt=a("{",!1),yt="}",xt=a("}",!1),wt=function(r,n){return n.entities=n.entities||[],e.checkForUndeclaredEntities(n.entities,n.arcs),n=t.assign({meta:e.getMetaInfo(n.options,n.arcs)},n),r.length>0&&(n=t.assign({precomment:r},n)),n},vt="msc",Ct=a("msc",!0),kt="xu",At=a("xu",!0),_t=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},Tt=",",Lt=a(",",!1),St=function(t){return t},Et=";",jt=a(";",!1),Ft=function(e){return e[0].concat(e[1]).reduce(t.assign,{})},Pt=c("option"),Bt="hscale",Dt=a("hscale",!0),It="arcgradient",Mt=a("arcgradient",!0),Ot="=",Nt=a("=",!1),Ht=function(t,r){return e.nameValue2Option(t,r)},Rt="width",Wt=a("width",!0),zt="wordwraparcs",Gt=a("wordwraparcs",!0),qt=function(t,r){return e.nameValue2Option(t,e.flattenBoolean(r))},Xt="wordwrapentities",Vt=a("wordwrapentities",!0),Ut="wordwrapboxes",Yt=a("wordwrapboxes",!0),Zt="watermark",$t=a("watermark",!0),Kt=function(t){return t},Jt=function(t){return t[0].concat(t[1])},Qt=c("entity"),te="[",ee=a("[",!1),re="]",ne=a("]",!1),oe=function(t,e){return e},ie=function(e,r){return t.assign({name:e},r)},ae=function(r,n){return e.isMscGenKeyword(r)&&i("MscGen keywords aren't allowed as entity names (embed them in quotes if you need them)"),t.assign({name:r},n)},se=function(t){return t},ce=function(t){return t[0].concat(t[1])},ue=function(t,e){return e},le=function(e,r){return t.assign(e,r)},de=function(t){return{kind:t}},fe=function(t,e,r){return{kind:e,from:t,to:r}},he="*",ge=a("*",!1),pe=function(t,e){return{kind:t,from:"*",to:e}},me=function(t,e){return{kind:e,from:t,to:"*"}},be=function(t,e,r,n){return n},ye=function(e,r,n,o,i){return t.assign({kind:r,from:e,to:n,arcs:i},o)},xe=c("empty row"),we="|||",ve=a("|||",!1),Ce="...",ke=a("...",!1),Ae=c("---"),_e="---",Te=a("---",!1),Le=function(t){return t.toLowerCase()},Se=c("bi-directional arrow"),Ee="--",je=a("--",!1),Fe="<->",Pe=a("<->",!1),Be="==",De=a("==",!1),Ie="<<=>>",Me=a("<<=>>",!1),Oe="<=>",Ne=a("<=>",!1),He="..",Re=a("..",!1),We="<<>>",ze=a("<<>>",!1),Ge="::",qe=a("::",!1),Xe="<:>",Ve=a("<:>",!1),Ue=c("left to right arrow"),Ye="->",Ze=a("->",!1),$e="=>>",Ke=a("=>>",!1),Je="=>",Qe=a("=>",!1),tr=">>",er=a(">>",!1),rr=":>",nr=a(":>",!1),or="-x",ir=a("-x",!0),ar=c("right to left arrow"),sr="<-",cr=a("<-",!1),ur="<<=",lr=a("<<=",!1),dr="<=",fr=a("<=",!1),hr="<<",gr=a("<<",!1),pr="<:",mr=a("<:",!1),br="x-",yr=a("x-",!0),xr=c("box"),wr="note",vr=a("note",!0),Cr="abox",kr=a("abox",!0),Ar="rbox",_r=a("rbox",!0),Tr="box",Lr=a("box",!0),Sr=c("inline expression"),Er="alt",jr=a("alt",!0),Fr="else",Pr=a("else",!0),Br="opt",Dr=a("opt",!0),Ir="break",Mr=a("break",!0),Or="par",Nr=a("par",!0),Hr="seq",Rr=a("seq",!0),Wr="strict",zr=a("strict",!0),Gr="neg",qr=a("neg",!0),Xr="critical",Vr=a("critical",!0),Ur="ignore",Yr=a("ignore",!0),Zr="consider",$r=a("consider",!0),Kr="assert",Jr=a("assert",!0),Qr="loop",tn=a("loop",!0),en="ref",rn=a("ref",!0),nn="exc",on=a("exc",!0),an=function(t){return t.toLowerCase()},sn=function(e){return e[0].concat(e[1]).reduce(t.assign,{})},cn=function(t,e){var r={};return r[t.toLowerCase().replace("colour","color")]=e,r},un=c("attribute name"),ln="label",dn=a("label",!0),fn="idurl",hn=a("idurl",!0),gn="id",pn=a("id",!0),mn="url",bn=a("url",!0),yn="linecolor",xn=a("linecolor",!0),wn="linecolour",vn=a("linecolour",!0),Cn="textcolor",kn=a("textcolor",!0),An="textcolour",_n=a("textcolour",!0),Tn="textbgcolor",Ln=a("textbgcolor",!0),Sn="textbgcolour",En=a("textbgcolour",!0),jn="arclinecolor",Fn=a("arclinecolor",!0),Pn="arclinecolour",Bn=a("arclinecolour",!0),Dn="arctextcolor",In=a("arctextcolor",!0),Mn="arctextcolour",On=a("arctextcolour",!0),Nn="arctextbgcolor",Hn=a("arctextbgcolor",!0),Rn="arctextbgcolour",Wn=a("arctextbgcolour",!0),zn="arcskip",Gn=a("arcskip",!0),qn="title",Xn=a("title",!0),Vn=c("double quoted string"),Un='"',Yn=a('"',!1),Zn=function(t){return t.join("")},$n='\\"',Kn=a('\\"',!1),Jn=function(){return{type:"any"}}(),Qn=function(t){return t},to=c("identifier"),eo=/^[A-Za-z_0-9]/,ro=s([["A","Z"],["a","z"],"_",["0","9"]],!1,!1),no=function(t){return t.join("")},oo=c("whitespace"),io=/^[ \t]/,ao=s([" ","\t"],!1,!1),so=c("lineend"),co=/^[\r\n]/,uo=s(["\r","\n"],!1,!1),lo="/*",fo=a("/*",!1),ho="*/",go=a("*/",!1),po=function(t,e,r){return t+e.join("")+r},mo="//",bo=a("//",!1),yo="#",xo=a("#",!1),wo=/^[^\r\n]/,vo=s(["\r","\n"],!0,!1),Co=function(t,e){return t+e.join("")},ko=c("comment"),Ao=c("number"),_o=function(t){return t},To=function(t){return t.toString()},Lo=function(t){return t.toString()},So=/^[0-9]/,Eo=s([["0","9"]],!1,!1),jo=function(t){return parseInt(t.join(""),10)},Fo=".",Po=a(".",!1),Bo=function(t){return parseFloat(t.join(""))},Do=c("boolean"),Io=function(t){return t},Mo=function(t){return t.toString()},Oo="true",No=a("true",!0),Ho="false",Ro=a("false",!0),Wo="on",zo=a("on",!0),Go="off",qo=a("off",!0),Xo="0",Vo=a("0",!1),Uo="1",Yo=a("1",!1),Zo=c("size"),$o=function(t){return t.toString()},Ko="auto",Jo=a("auto",!0),Qo=function(t){return t.toLowerCase()},ti=0,ei=0,ri=[{line:1,column:1}],ni=0,oi=[],ii=0;if("startRule"in o){if(!(o.startRule in gt))throw new Error("Can't start parsing from rule \""+o.startRule+'".');pt=gt[o.startRule]}if((ft=pt())!==ht&&ti===n.length)return ft;throw ft!==ht&&ti<n.length&&d(function(){return{type:"end"}}()),h(oi,ni<n.length?n.charAt(ni):null,ni<n.length?l(ni,ni+1):l(ni,ni))}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(r,Error),r.buildMessage=function(t,e){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function i(t){return a[t.type](t)}var a={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+function(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=i(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+n(t)+'"':"end of input"}(e)+" found."},{SyntaxError:r,parse:n}}),function(t,n){"function"==typeof r&&r.amd?r("lib/mscgenjs-core/parse/msgennyparser",["../lib/lodash/lodash.custom","./parserHelpers"],n):"object"==typeof module&&module.exports&&(module.exports=n(e("../lib/lodash/lodash.custom"),e("./parserHelpers")))}(0,function(t,e){"use strict";function r(t,e,n,o){this.message=t,this.expected=e,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}function n(n,o){function i(t,e){return{type:"literal",text:t,ignoreCase:e}}function a(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function s(t){return{type:"other",description:t}}function c(t){var e,r=fo[t];if(r)return r;for(e=t-1;!fo[e];)e--;for(r=fo[e],r={line:r.line,column:r.column};e<t;)10===n.charCodeAt(e)?(r.line++,r.column=1):r.column++,e++;return fo[t]=r,r}function u(t,e){var r=c(t),n=c(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function l(t){uo<ho||(uo>ho&&(ho=uo,go=[]),go.push(t))}function d(t,e,n){return new r(r.buildMessage(t,e),t,e,n)}function f(){var t,e,r,n;return t=uo,e=$(),e!==ft?(r=h(),r!==ft?(n=$(),n!==ft?(lo=t,e=pt(e,r),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function h(){var t,e,r,n;return t=uo,e=g(),e===ft&&(e=null),e!==ft?(r=m(),r===ft&&(r=null),r!==ft?(n=y(),n===ft&&(n=null),n!==ft?(lo=t,e=mt(e,r,n),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function g(){var t,e,r,o,i,a;for(t=uo,e=uo,r=[],o=uo,i=p(),i!==ft?(44===n.charCodeAt(uo)?(a=bt,uo++):(a=ft,0===po&&l(yt)),a!==ft?(lo=o,i=xt(i),o=i):(uo=o,o=ft)):(uo=o,o=ft);o!==ft;)r.push(o),o=uo,i=p(),i!==ft?(44===n.charCodeAt(uo)?(a=bt,uo++):(a=ft,0===po&&l(yt)),a!==ft?(lo=o,i=xt(i),o=i):(uo=o,o=ft)):(uo=o,o=ft);return r!==ft?(o=uo,i=p(),i!==ft?(59===n.charCodeAt(uo)?(a=wt,uo++):(a=ft,0===po&&l(vt)),a!==ft?(lo=o,i=xt(i),o=i):(uo=o,o=ft)):(uo=o,o=ft),o!==ft?(r=[r,o],e=r):(uo=e,e=ft)):(uo=e,e=ft),e!==ft&&(lo=t,e=Ct(e)),t=e}function p(){var t,e,r,o,i,a,s,c;return t=uo,e=$(),e!==ft?(n.substr(uo,6).toLowerCase()===kt?(r=n.substr(uo,6),uo+=6):(r=ft,0===po&&l(At)),r===ft&&(n.substr(uo,11).toLowerCase()===_t?(r=n.substr(uo,11),uo+=11):(r=ft,0===po&&l(Tt))),r!==ft?(o=$(),o!==ft?(61===n.charCodeAt(uo)?(i=Lt,uo++):(i=ft,0===po&&l(St)),i!==ft?(a=$(),a!==ft?(s=K(),s!==ft?(c=$(),c!==ft?(lo=t,e=Et(r,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=$(),e!==ft?(n.substr(uo,5).toLowerCase()===jt?(r=n.substr(uo,5),uo+=5):(r=ft,0===po&&l(Ft)),r!==ft?(o=$(),o!==ft?(61===n.charCodeAt(uo)?(i=Lt,uo++):(i=ft,0===po&&l(St)),i!==ft?(a=$(),a!==ft?(s=it(),s!==ft?(c=$(),c!==ft?(lo=t,e=Et(r,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=$(),e!==ft?(n.substr(uo,12).toLowerCase()===Pt?(r=n.substr(uo,12),uo+=12):(r=ft,0===po&&l(Bt)),r!==ft?(o=$(),o!==ft?(61===n.charCodeAt(uo)?(i=Lt,uo++):(i=ft,0===po&&l(St)),i!==ft?(a=$(),a!==ft?(s=rt(),s!==ft?(c=$(),c!==ft?(lo=t,e=Dt(r,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=$(),e!==ft?(n.substr(uo,16).toLowerCase()===It?(r=n.substr(uo,16),uo+=16):(r=ft,0===po&&l(Mt)),r!==ft?(o=$(),o!==ft?(61===n.charCodeAt(uo)?(i=Lt,uo++):(i=ft,0===po&&l(St)),i!==ft?(a=$(),a!==ft?(s=rt(),s!==ft?(c=$(),c!==ft?(lo=t,e=Dt(r,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=$(),e!==ft?(n.substr(uo,13).toLowerCase()===Ot?(r=n.substr(uo,13),uo+=13):(r=ft,0===po&&l(Nt)),r!==ft?(o=$(),o!==ft?(61===n.charCodeAt(uo)?(i=Lt,uo++):(i=ft,0===po&&l(St)),i!==ft?(a=$(),a!==ft?(s=rt(),s!==ft?(c=$(),c!==ft?(lo=t,e=Dt(r,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=$(),e!==ft?(n.substr(uo,9).toLowerCase()===Ht?(r=n.substr(uo,9),uo+=9):(r=ft,0===po&&l(Rt)),r!==ft?(o=$(),o!==ft?(61===n.charCodeAt(uo)?(i=Lt,uo++):(i=ft,0===po&&l(St)),i!==ft?(a=$(),a!==ft?(s=I(),s!==ft?(c=$(),c!==ft?(lo=t,e=Et(r,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)))))),t}function m(){var t,e,r,o,i,a;for(t=uo,e=uo,r=[],o=uo,i=b(),i!==ft?(44===n.charCodeAt(uo)?(a=bt,uo++):(a=ft,0===po&&l(yt)),a!==ft?(lo=o,i=Wt(i),o=i):(uo=o,o=ft)):(uo=o,o=ft);o!==ft;)r.push(o),o=uo,i=b(),i!==ft?(44===n.charCodeAt(uo)?(a=bt,uo++):(a=ft,0===po&&l(yt)),a!==ft?(lo=o,i=Wt(i),o=i):(uo=o,o=ft)):(uo=o,o=ft);return r!==ft?(o=uo,i=b(),i!==ft?(59===n.charCodeAt(uo)?(a=wt,uo++):(a=ft,0===po&&l(vt)),a!==ft?(lo=o,i=Wt(i),o=i):(uo=o,o=ft)):(uo=o,o=ft),o!==ft?(r=[r,o],e=r):(uo=e,e=ft)):(uo=e,e=ft),e!==ft&&(lo=t,e=zt(e)),t=e}function b(){var t,e,r,o,i,a,s,c,u;return po++,t=uo,e=$(),e!==ft?(r=H(),r!==ft?(o=$(),o!==ft?(i=uo,58===n.charCodeAt(uo)?(a=qt,uo++):(a=ft,0===po&&l(Xt)),a!==ft?(s=$(),s!==ft?(c=D(),c!==ft?(u=$(),u!==ft?(lo=i,a=Vt(r,c),i=a):(uo=i,i=ft)):(uo=i,i=ft)):(uo=i,i=ft)):(uo=i,i=ft),i===ft&&(i=null),i!==ft?(lo=t,e=Ut(r,i),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),po--,t===ft&&(e=ft,0===po&&l(Gt)),t}function y(){var t,e,r,o,i;if(t=[],e=uo,r=x(),r!==ft?(o=$(),o!==ft?(59===n.charCodeAt(uo)?(i=wt,uo++):(i=ft,0===po&&l(vt)),i!==ft?(lo=e,r=Yt(r),e=r):(uo=e,e=ft)):(uo=e,e=ft)):(uo=e,e=ft),e!==ft)for(;e!==ft;)t.push(e),e=uo,r=x(),r!==ft?(o=$(),o!==ft?(59===n.charCodeAt(uo)?(i=wt,uo++):(i=ft,0===po&&l(vt)),i!==ft?(lo=e,r=Yt(r),e=r):(uo=e,e=ft)):(uo=e,e=ft)):(uo=e,e=ft);else t=ft;return t}function x(){var t,e,r,o,i,a;for(t=uo,e=uo,r=[],o=uo,i=w(),i!==ft?(44===n.charCodeAt(uo)?(a=bt,uo++):(a=ft,0===po&&l(yt)),a!==ft?(lo=o,i=Yt(i),o=i):(uo=o,o=ft)):(uo=o,o=ft);o!==ft;)r.push(o),o=uo,i=w(),i!==ft?(44===n.charCodeAt(uo)?(a=bt,uo++):(a=ft,0===po&&l(yt)),a!==ft?(lo=o,i=Yt(i),o=i):(uo=o,o=ft)):(uo=o,o=ft);return r!==ft?(o=uo,i=w(),i!==ft&&(lo=o,i=Yt(i)),o=i,o!==ft?(r=[r,o],e=r):(uo=e,e=ft)):(uo=e,e=ft),e!==ft&&(lo=t,e=Zt(e)),t=e}function w(){var t;return t=v(),t===ft&&(t=_()),t}function v(){var t,e,r,o,i,a,s;return t=uo,e=uo,r=C(),r!==ft&&(lo=e,r=$t(r)),e=r,e===ft&&(e=uo,r=A(),r!==ft&&(lo=e,r=Kt(r)),(e=r)===ft&&(e=uo,r=k(),r!==ft&&(lo=e,r=Jt(r)),e=r)),e!==ft?(r=uo,58===n.charCodeAt(uo)?(o=qt,uo++):(o=ft,0===po&&l(Xt)),o!==ft?(i=$(),i!==ft?(a=D(),a!==ft?(s=$(),s!==ft?(lo=r,o=Qt(e,a),r=o):(uo=r,r=ft)):(uo=r,r=ft)):(uo=r,r=ft)):(uo=r,r=ft),r===ft&&(r=null),r!==ft?(lo=t,e=te(e,r),t=e):(uo=t,t=ft)):(uo=t,t=ft),t}function C(){var t,e,r,n;return t=uo,e=$(),e!==ft?(r=T(),r!==ft?(n=$(),n!==ft?(lo=t,e=ee(r),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function k(){var t,e,r,n;return t=uo,e=$(),e!==ft?(r=L(),r!==ft?(n=$(),n!==ft?(lo=t,e=ee(r),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function A(){var t,e,r,o,i,a,s,c;return t=uo,e=$(),e!==ft?(r=H(),r!==ft?(o=$(),o!==ft?(i=S(),i!==ft?(a=$(),a!==ft?(s=H(),s!==ft?(c=$(),c!==ft?(lo=t,e=re(r,i,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=$(),e!==ft?(42===n.charCodeAt(uo)?(r=ne,uo++):(r=ft,0===po&&l(oe)),r!==ft?(o=$(),o!==ft?(i=F(),i!==ft?(a=$(),a!==ft?(s=H(),s!==ft?(c=$(),c!==ft?(lo=t,e=ie(i,s),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=$(),e!==ft?(r=H(),r!==ft?(o=$(),o!==ft?(i=j(),i!==ft?(a=$(),a!==ft?(42===n.charCodeAt(uo)?(s=ne,uo++):(s=ft,0===po&&l(oe)),s!==ft?(c=$(),c!==ft?(lo=t,e=ae(r,i),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t===ft&&(t=uo,e=$(),e!==ft?(r=H(),r!==ft?(o=$(),o!==ft?(i=E(),i!==ft?(a=$(),a!==ft?(42===n.charCodeAt(uo)?(s=ne,uo++):(s=ft,0===po&&l(oe)),s!==ft?(c=$(),c!==ft?(lo=t,e=ae(r,i),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)))),t}function _(){var t,e,r,o,i,a,s,c,u,d,f,h,g,p,m;return t=uo,e=$(),e!==ft?(r=H(),r!==ft?(o=$(),o!==ft?(i=B(),i!==ft?(a=$(),a!==ft?(s=H(),s!==ft?(c=$(),c!==ft?(u=uo,58===n.charCodeAt(uo)?(d=qt,uo++):(d=ft,0===po&&l(Xt)),d!==ft?(f=$(),f!==ft?(h=D(),h!==ft?(g=$(),g!==ft?(lo=u,d=se(r,i,s,h),u=d):(uo=u,u=ft)):(uo=u,u=ft)):(uo=u,u=ft)):(uo=u,u=ft),u===ft&&(u=null),u!==ft?(123===n.charCodeAt(uo)?(d=ce,uo++):(d=ft,0===po&&l(ue)),d!==ft?(f=$(),f!==ft?(h=y(),h===ft&&(h=null),h!==ft?(g=$(),g!==ft?(125===n.charCodeAt(uo)?(p=le,uo++):(p=ft,0===po&&l(de)),p!==ft?(m=$(),m!==ft?(lo=t,e=fe(r,i,s,u,h),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function T(){var t;return po++,n.substr(uo,3)===ge?(t=ge,uo+=3):(t=ft,0===po&&l(pe)),t===ft&&(n.substr(uo,3)===me?(t=me,uo+=3):(t=ft,0===po&&l(be))),po--,t===ft&&(ft,0===po&&l(he)),t}function L(){var t;return po++,n.substr(uo,3)===xe?(t=xe,uo+=3):(t=ft,0===po&&l(we)),po--,t===ft&&(ft,0===po&&l(ye)),t}function S(){var t,e;return t=uo,e=E(),e===ft&&(e=j())===ft&&(e=F())===ft&&(e=P()),e!==ft&&(lo=t,e=ve(e)),t=e}function E(){var t;return po++,n.substr(uo,2)===ke?(t=ke,uo+=2):(t=ft,0===po&&l(Ae)),t===ft&&(n.substr(uo,3)===_e?(t=_e,uo+=3):(t=ft,0===po&&l(Te)),t===ft&&(n.substr(uo,2)===Le?(t=Le,uo+=2):(t=ft,0===po&&l(Se)),t===ft&&(n.substr(uo,5)===Ee?(t=Ee,uo+=5):(t=ft,0===po&&l(je)),t===ft&&(n.substr(uo,3)===Fe?(t=Fe,uo+=3):(t=ft,0===po&&l(Pe)),t===ft&&(n.substr(uo,2)===Be?(t=Be,uo+=2):(t=ft,0===po&&l(De)),t===ft&&(n.substr(uo,4)===Ie?(t=Ie,uo+=4):(t=ft,0===po&&l(Me)),t===ft&&(n.substr(uo,2)===Oe?(t=Oe,uo+=2):(t=ft,0===po&&l(Ne)),t===ft&&(n.substr(uo,3)===He?(t=He,uo+=3):(t=ft,0===po&&l(Re)))))))))),po--,t===ft&&(ft,0===po&&l(Ce)),t}function j(){var t;return po++,n.substr(uo,2)===ze?(t=ze,uo+=2):(t=ft,0===po&&l(Ge)),t===ft&&(n.substr(uo,3)===qe?(t=qe,uo+=3):(t=ft,0===po&&l(Xe)),t===ft&&(n.substr(uo,2)===Ve?(t=Ve,uo+=2):(t=ft,0===po&&l(Ue)),t===ft&&(n.substr(uo,2)===Ye?(t=Ye,uo+=2):(t=ft,0===po&&l(Ze)),t===ft&&(n.substr(uo,2)===$e?(t=$e,uo+=2):(t=ft,0===po&&l(Ke)),t===ft&&(n.substr(uo,2).toLowerCase()===Je?(t=n.substr(uo,2),uo+=2):(t=ft,0===po&&l(Qe))))))),po--,t===ft&&(ft,0===po&&l(We)),t}function F(){var t;return po++,n.substr(uo,2)===er?(t=er,uo+=2):(t=ft,0===po&&l(rr)),t===ft&&(n.substr(uo,3)===nr?(t=nr,uo+=3):(t=ft,0===po&&l(or)),t===ft&&(n.substr(uo,2)===ir?(t=ir,uo+=2):(t=ft,0===po&&l(ar)),t===ft&&(n.substr(uo,2)===sr?(t=sr,uo+=2):(t=ft,0===po&&l(cr)),t===ft&&(n.substr(uo,2)===ur?(t=ur,uo+=2):(t=ft,0===po&&l(lr)),t===ft&&(n.substr(uo,2).toLowerCase()===dr?(t=n.substr(uo,2),uo+=2):(t=ft,0===po&&l(fr))))))),po--,t===ft&&(ft,0===po&&l(tr)),t}function P(){var t;return po++,n.substr(uo,4).toLowerCase()===gr?(t=n.substr(uo,4),uo+=4):(t=ft,0===po&&l(pr)),t===ft&&(n.substr(uo,4).toLowerCase()===mr?(t=n.substr(uo,4),uo+=4):(t=ft,0===po&&l(br)),t===ft&&(n.substr(uo,4).toLowerCase()===yr?(t=n.substr(uo,4),uo+=4):(t=ft,0===po&&l(xr)),t===ft&&(n.substr(uo,3).toLowerCase()===wr?(t=n.substr(uo,3),uo+=3):(t=ft,0===po&&l(vr))))),po--,t===ft&&(ft,0===po&&l(hr)),t}function B(){var t,e;return po++,t=uo,n.substr(uo,3).toLowerCase()===kr?(e=n.substr(uo,3),uo+=3):(e=ft,0===po&&l(Ar)),e===ft&&(n.substr(uo,4).toLowerCase()===_r?(e=n.substr(uo,4),uo+=4):(e=ft,0===po&&l(Tr)),e===ft&&(n.substr(uo,3).toLowerCase()===Lr?(e=n.substr(uo,3),uo+=3):(e=ft,0===po&&l(Sr)),e===ft&&(n.substr(uo,5).toLowerCase()===Er?(e=n.substr(uo,5),uo+=5):(e=ft,0===po&&l(jr)),e===ft&&(n.substr(uo,3).toLowerCase()===Fr?(e=n.substr(uo,3),uo+=3):(e=ft,0===po&&l(Pr)),e===ft&&(n.substr(uo,3).toLowerCase()===Br?(e=n.substr(uo,3),uo+=3):(e=ft,0===po&&l(Dr)),e===ft&&(n.substr(uo,6).toLowerCase()===Ir?(e=n.substr(uo,6),uo+=6):(e=ft,0===po&&l(Mr)),e===ft&&(n.substr(uo,3).toLowerCase()===Or?(e=n.substr(uo,3),uo+=3):(e=ft,0===po&&l(Nr)),e===ft&&(n.substr(uo,8).toLowerCase()===Hr?(e=n.substr(uo,8),uo+=8):(e=ft,0===po&&l(Rr)),e===ft&&(n.substr(uo,6).toLowerCase()===Wr?(e=n.substr(uo,6),uo+=6):(e=ft,0===po&&l(zr)),e===ft&&(n.substr(uo,8).toLowerCase()===Gr?(e=n.substr(uo,8),uo+=8):(e=ft,0===po&&l(qr)),e===ft&&(n.substr(uo,6).toLowerCase()===Xr?(e=n.substr(uo,6),uo+=6):(e=ft,0===po&&l(Vr)),e===ft&&(n.substr(uo,4).toLowerCase()===Ur?(e=n.substr(uo,4),uo+=4):(e=ft,0===po&&l(Yr)),e===ft&&(n.substr(uo,3).toLowerCase()===Zr?(e=n.substr(uo,3),uo+=3):(e=ft,0===po&&l($r)),e===ft&&(n.substr(uo,3).toLowerCase()===Kr?(e=n.substr(uo,3),uo+=3):(e=ft,0===po&&l(Jr)))))))))))))))),e!==ft&&(lo=t,e=Qr(e)),t=e,po--,t===ft&&(e=ft,0===po&&l(Cr)),t}function D(){var t;return t=I(),t===ft&&(t=O()),t}function I(){var t,e,r,o;return po++,t=uo,34===n.charCodeAt(uo)?(e=en,uo++):(e=ft,0===po&&l(rn)),e!==ft?(r=M(),r!==ft?(34===n.charCodeAt(uo)?(o=en,uo++):(o=ft,0===po&&l(rn)),o!==ft?(lo=t,e=nn(r),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),po--,t===ft&&(e=ft,0===po&&l(tn)),t}function M(){var t,e,r,o;for(t=[],e=uo,r=uo,po++,34===n.charCodeAt(uo)?(o=en,uo++):(o=ft,0===po&&l(rn)),po--,o===ft?r=void 0:(uo=r,r=ft),r!==ft?(n.substr(uo,2)===on?(o=on,uo+=2):(o=ft,0===po&&l(an)),o===ft&&(n.length>uo?(o=n.charAt(uo),uo++):(o=ft,0===po&&l(sn))),o!==ft?(lo=e,r=cn(o),e=r):(uo=e,e=ft)):(uo=e,e=ft);e!==ft;)t.push(e),e=uo,r=uo,po++,34===n.charCodeAt(uo)?(o=en,uo++):(o=ft,0===po&&l(rn)),po--,o===ft?r=void 0:(uo=r,r=ft),r!==ft?(n.substr(uo,2)===on?(o=on,uo+=2):(o=ft,0===po&&l(an)),o===ft&&(n.length>uo?(o=n.charAt(uo),uo++):(o=ft,0===po&&l(sn))),o!==ft?(lo=e,r=cn(o),e=r):(uo=e,e=ft)):(uo=e,e=ft);return t}function O(){var t,e;return t=uo,e=N(),e!==ft&&(lo=t,e=un(e)),t=e}function N(){var t,e,r,o;for(t=[],e=uo,r=uo,po++,44===n.charCodeAt(uo)?(o=bt,uo++):(o=ft,0===po&&l(yt)),o===ft&&(59===n.charCodeAt(uo)?(o=wt,uo++):(o=ft,0===po&&l(vt)),o===ft&&(123===n.charCodeAt(uo)?(o=ce,uo++):(o=ft,0===po&&l(ue)))),po--,o===ft?r=void 0:(uo=r,r=ft),r!==ft?(n.length>uo?(o=n.charAt(uo),uo++):(o=ft,0===po&&l(sn)),o!==ft?(lo=e,r=cn(o),e=r):(uo=e,e=ft)):(uo=e,e=ft);e!==ft;)t.push(e),e=uo,r=uo,po++,44===n.charCodeAt(uo)?(o=bt,uo++):(o=ft,0===po&&l(yt)),o===ft&&(59===n.charCodeAt(uo)?(o=wt,uo++):(o=ft,0===po&&l(vt)),o===ft&&(123===n.charCodeAt(uo)?(o=ce,uo++):(o=ft,0===po&&l(ue)))),po--,o===ft?r=void 0:(uo=r,r=ft),r!==ft?(n.length>uo?(o=n.charAt(uo),uo++):(o=ft,0===po&&l(sn)),o!==ft?(lo=e,r=cn(o),e=r):(uo=e,e=ft)):(uo=e,e=ft);return t}function H(){var t,e,r;if(po++,t=uo,e=[],dn.test(n.charAt(uo))?(r=n.charAt(uo),uo++):(r=ft,0===po&&l(fn)),r!==ft)for(;r!==ft;)e.push(r),dn.test(n.charAt(uo))?(r=n.charAt(uo),uo++):(r=ft,0===po&&l(fn));else e=ft;return e!==ft&&(lo=t,e=hn(e)),t=e,t===ft&&(t=I()),po--,t===ft&&(e=ft,0===po&&l(ln)),t}function R(){var t,e;return po++,t=uo,pn.test(n.charAt(uo))?(e=n.charAt(uo),uo++):(e=ft,0===po&&l(mn)),e!==ft&&(lo=t,e=cn(e)),t=e,po--,t===ft&&(e=ft,0===po&&l(gn)),t}function W(){var t,e;return po++,t=uo,yn.test(n.charAt(uo))?(e=n.charAt(uo),uo++):(e=ft,0===po&&l(xn)),e!==ft&&(lo=t,e=cn(e)),t=e,po--,t===ft&&(e=ft,0===po&&l(bn)),t}function z(){var t;return n.substr(uo,2)===wn?(t=wn,uo+=2):(t=ft,0===po&&l(vn)),t}function G(){var t;return n.substr(uo,2)===Cn?(t=Cn,uo+=2):(t=ft,0===po&&l(kn)),t}function q(){var t,e,r;return t=uo,e=uo,po++,n.substr(uo,2)===Cn?(r=Cn,uo+=2):(r=ft,0===po&&l(kn)),po--,r===ft?e=void 0:(uo=e,e=ft),e!==ft?(n.length>uo?(r=n.charAt(uo),uo++):(r=ft,0===po&&l(sn)),r!==ft?(lo=t,e=cn(r),t=e):(uo=t,t=ft)):(uo=t,t=ft),t}function X(){var t,e,r,n;if(t=uo,(e=z())!==ft){for(r=[],n=q();n!==ft;)r.push(n),n=q();r!==ft?(n=G(),n!==ft?(lo=t,e=An(e,r,n),t=e):(uo=t,t=ft)):(uo=t,t=ft)}else uo=t,t=ft;return t}function V(){var t;return n.substr(uo,2)===_n?(t=_n,uo+=2):(t=ft,0===po&&l(Tn)),t===ft&&(35===n.charCodeAt(uo)?(t=Ln,uo++):(t=ft,0===po&&l(Sn))),t}function U(){var t;return En.test(n.charAt(uo))?(t=n.charAt(uo),uo++):(t=ft,0===po&&l(jn)),t}function Y(){var t,e,r,n;if(t=uo,(e=V())!==ft){for(r=[],n=U();n!==ft;)r.push(n),n=U();r!==ft?(lo=t,e=Fn(e,r),t=e):(uo=t,t=ft)}else uo=t,t=ft;return t}function Z(){var t;return po++,t=Y(),t===ft&&(t=X()),po--,t===ft&&(ft,0===po&&l(Pn)),t}function $(){var t,e;for(t=[],e=R(),e===ft&&(e=W())===ft&&(e=Z());e!==ft;)t.push(e),(e=R())===ft&&(e=W())===ft&&(e=Z());return t}function K(){var t,e;return po++,t=uo,e=J(),e!==ft&&(lo=t,e=Dn(e)),t=e,t===ft&&(t=uo,e=Q(),e!==ft&&(lo=t,e=In(e)),t=e),po--,t===ft&&(e=ft,0===po&&l(Bn)),t}function J(){var t,e,r,o;return t=uo,34===n.charCodeAt(uo)?(e=en,uo++):(e=ft,0===po&&l(rn)),e!==ft?(r=Q(),r!==ft?(34===n.charCodeAt(uo)?(o=en,uo++):(o=ft,0===po&&l(rn)),o!==ft?(lo=t,e=Mn(r),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function Q(){var t;return t=et(),t===ft&&(t=tt()),t}function tt(){var t,e,r;if(t=uo,e=[],On.test(n.charAt(uo))?(r=n.charAt(uo),uo++):(r=ft,0===po&&l(Nn)),r!==ft)for(;r!==ft;)e.push(r),On.test(n.charAt(uo))?(r=n.charAt(uo),uo++):(r=ft,0===po&&l(Nn));else e=ft;return e!==ft&&(lo=t,e=Hn(e)),t=e}function et(){var t,e,r,o,i;return t=uo,e=uo,r=tt(),r!==ft?(46===n.charCodeAt(uo)?(o=Rn,uo++):(o=ft,0===po&&l(Wn)),o!==ft?(i=tt(),i!==ft?(r=[r,o,i],e=r):(uo=e,e=ft)):(uo=e,e=ft)):(uo=e,e=ft),e!==ft&&(lo=t,e=zn(e)),t=e}function rt(){var t,e;return po++,t=uo,e=nt(),e!==ft&&(lo=t,e=qn(e)),t=e,t===ft&&(t=uo,e=ot(),e!==ft&&(lo=t,e=Xn(e)),t=e),po--,t===ft&&(e=ft,0===po&&l(Gn)),t}function nt(){var t,e,r,o;return t=uo,34===n.charCodeAt(uo)?(e=en,uo++):(e=ft,0===po&&l(rn)),e!==ft?(r=ot(),r!==ft?(34===n.charCodeAt(uo)?(o=en,uo++):(o=ft,0===po&&l(rn)),o!==ft?(lo=t,e=Dn(r),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function ot(){var t;return n.substr(uo,4).toLowerCase()===Vn?(t=n.substr(uo,4),uo+=4):(t=ft,0===po&&l(Un)),t===ft&&(n.substr(uo,5).toLowerCase()===Yn?(t=n.substr(uo,5),uo+=5):(t=ft,0===po&&l(Zn)),t===ft&&(n.substr(uo,2).toLowerCase()===$n?(t=n.substr(uo,2),uo+=2):(t=ft,0===po&&l(Kn)),t===ft&&(n.substr(uo,3).toLowerCase()===Jn?(t=n.substr(uo,3),uo+=3):(t=ft,0===po&&l(Qn)),t===ft&&(48===n.charCodeAt(uo)?(t=to,uo++):(t=ft,0===po&&l(eo)),t===ft&&(49===n.charCodeAt(uo)?(t=ro,uo++):(t=ft,0===po&&l(no))))))),t}function it(){var t;return po++,t=at(),t===ft&&(t=st()),po--,t===ft&&(ft,
0===po&&l(oo)),t}function at(){var t,e,r,o;return t=uo,34===n.charCodeAt(uo)?(e=en,uo++):(e=ft,0===po&&l(rn)),e!==ft?(r=st(),r!==ft?(34===n.charCodeAt(uo)?(o=en,uo++):(o=ft,0===po&&l(rn)),o!==ft?(lo=t,e=Dn(r),t=e):(uo=t,t=ft)):(uo=t,t=ft)):(uo=t,t=ft),t}function st(){var t,e;return t=uo,e=Q(),e!==ft&&(lo=t,e=io(e)),t=e,t===ft&&(t=uo,n.substr(uo,4).toLowerCase()===ao?(e=n.substr(uo,4),uo+=4):(e=ft,0===po&&l(so)),e!==ft&&(lo=t,e=co(e)),t=e),t}function ct(t,r,n){return!(e.entityExists(t,r)||!0===n[r])}function ut(t){return{name:t}}function lt(e,r,n){return n||(n={}),(r||[]).forEach(function(r){r.forEach(function(r){ct(e,r.from,n)&&e.push(ut(r.from)),r.arcs&&(n[r.to]=!0,t.assign(e,lt(e,r.arcs,n)),delete n[r.to]),ct(e,r.to,n)&&e.push(ut(r.to))})}),e}o=void 0!==o?o:{};var dt,ft={},ht={program:f},gt=f,pt=function(r,n){return n.entities=lt(n.entities||[],n.arcs),n=t.assign({meta:e.getMetaInfo(n.options,n.arcs)},n),r.length>0&&(n=t.assign({precomment:r},n)),n},mt=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},bt=",",yt=i(",",!1),xt=function(t){return t},wt=";",vt=i(";",!1),Ct=function(e){return e[0].concat(e[1]).reduce(t.assign,{})},kt="hscale",At=i("hscale",!0),_t="arcgradient",Tt=i("arcgradient",!0),Lt="=",St=i("=",!1),Et=function(t,r){return e.nameValue2Option(t,r)},jt="width",Ft=i("width",!0),Pt="wordwraparcs",Bt=i("wordwraparcs",!0),Dt=function(t,r){return e.nameValue2Option(t,e.flattenBoolean(r))},It="wordwrapentities",Mt=i("wordwrapentities",!0),Ot="wordwrapboxes",Nt=i("wordwrapboxes",!0),Ht="watermark",Rt=i("watermark",!0),Wt=function(t){return t},zt=function(t){return t[0].concat(t[1])},Gt=s("entity"),qt=":",Xt=i(":",!1),Vt=function(t,e){return e},Ut=function(t,e){var r=ut(t);return e&&(r.label=e),r},Yt=function(t){return t},Zt=function(t){return t[0].concat(t[1])},$t=function(t){return t},Kt=function(t){return t},Jt=function(t){return t},Qt=function(t,e){return e},te=function(t,e){return e&&(t.label=e),t},ee=function(t){return{kind:t}},re=function(t,e,r){return{kind:e,from:t,to:r}},ne="*",oe=i("*",!1),ie=function(t,e){return{kind:t,from:"*",to:e}},ae=function(t,e){return{kind:e,from:t,to:"*"}},se=function(t,e,r,n){return n},ce="{",ue=i("{",!1),le="}",de=i("}",!1),fe=function(t,e,r,n,o){var i={kind:e,from:t,to:r,arcs:o};return n&&(i.label=n),i},he=s("empty row"),ge="|||",pe=i("|||",!1),me="...",be=i("...",!1),ye=s("---"),xe="---",we=i("---",!1),ve=function(t){return t.toLowerCase()},Ce=s("bi-directional arrow"),ke="--",Ae=i("--",!1),_e="<->",Te=i("<->",!1),Le="==",Se=i("==",!1),Ee="<<=>>",je=i("<<=>>",!1),Fe="<=>",Pe=i("<=>",!1),Be="..",De=i("..",!1),Ie="<<>>",Me=i("<<>>",!1),Oe="::",Ne=i("::",!1),He="<:>",Re=i("<:>",!1),We=s("left to right arrow"),ze="->",Ge=i("->",!1),qe="=>>",Xe=i("=>>",!1),Ve="=>",Ue=i("=>",!1),Ye=">>",Ze=i(">>",!1),$e=":>",Ke=i(":>",!1),Je="-x",Qe=i("-x",!0),tr=s("right to left arrow"),er="<-",rr=i("<-",!1),nr="<<=",or=i("<<=",!1),ir="<=",ar=i("<=",!1),sr="<<",cr=i("<<",!1),ur="<:",lr=i("<:",!1),dr="x-",fr=i("x-",!0),hr=s("box"),gr="note",pr=i("note",!0),mr="abox",br=i("abox",!0),yr="rbox",xr=i("rbox",!0),wr="box",vr=i("box",!0),Cr=s("inline expression"),kr="alt",Ar=i("alt",!0),_r="else",Tr=i("else",!0),Lr="opt",Sr=i("opt",!0),Er="break",jr=i("break",!0),Fr="par",Pr=i("par",!0),Br="seq",Dr=i("seq",!0),Ir="strict",Mr=i("strict",!0),Or="neg",Nr=i("neg",!0),Hr="critical",Rr=i("critical",!0),Wr="ignore",zr=i("ignore",!0),Gr="consider",qr=i("consider",!0),Xr="assert",Vr=i("assert",!0),Ur="loop",Yr=i("loop",!0),Zr="ref",$r=i("ref",!0),Kr="exc",Jr=i("exc",!0),Qr=function(t){return t.toLowerCase()},tn=s("double quoted string"),en='"',rn=i('"',!1),nn=function(t){return t.join("")},on='\\"',an=i('\\"',!1),sn=function(){return{type:"any"}}(),cn=function(t){return t},un=function(t){return t.join("").trim()},ln=s("identifier"),dn=/^[^;, "\t\n\r=\-><:{*]/,fn=a([";",","," ",'"',"\t","\n","\r","=","-",">","<",":","{","*"],!0,!1),hn=function(t){return t.join("")},gn=s("whitespace"),pn=/^[ \t]/,mn=a([" ","\t"],!1,!1),bn=s("lineend"),yn=/^[\r\n]/,xn=a(["\r","\n"],!1,!1),wn="/*",vn=i("/*",!1),Cn="*/",kn=i("*/",!1),An=function(t,e,r){return t+e.join("")+r},_n="//",Tn=i("//",!1),Ln="#",Sn=i("#",!1),En=/^[^\r\n]/,jn=a(["\r","\n"],!0,!1),Fn=function(t,e){return t+e.join("")},Pn=s("comment"),Bn=s("number"),Dn=function(t){return t},In=function(t){return t.toString()},Mn=function(t){return t.toString()},On=/^[0-9]/,Nn=a([["0","9"]],!1,!1),Hn=function(t){return parseInt(t.join(""),10)},Rn=".",Wn=i(".",!1),zn=function(t){return parseFloat(t.join(""))},Gn=s("boolean"),qn=function(t){return t},Xn=function(t){return t.toString()},Vn="true",Un=i("true",!0),Yn="false",Zn=i("false",!0),$n="on",Kn=i("on",!0),Jn="off",Qn=i("off",!0),to="0",eo=i("0",!1),ro="1",no=i("1",!1),oo=s("size"),io=function(t){return t.toString()},ao="auto",so=i("auto",!0),co=function(t){return t.toLowerCase()},uo=0,lo=0,fo=[{line:1,column:1}],ho=0,go=[],po=0;if("startRule"in o){if(!(o.startRule in ht))throw new Error("Can't start parsing from rule \""+o.startRule+'".');gt=ht[o.startRule]}if((dt=gt())!==ft&&uo===n.length)return dt;throw dt!==ft&&uo<n.length&&l(function(){return{type:"end"}}()),d(go,ho<n.length?n.charAt(ho):null,ho<n.length?u(ho,ho+1):u(ho,ho))}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(r,Error),r.buildMessage=function(t,e){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function i(t){return a[t.type](t)}var a={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+function(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=i(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+n(t)+'"':"end of input"}(e)+" found."},{SyntaxError:r,parse:n}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/domprimitives",[],function(){"use strict";function t(t,e,r){return Boolean(r)&&t.setAttribute(e,r),t}function e(t,e,r,n){return Boolean(n)&&t.setAttributeNS(e,r,n),t}function r(e,r){return Object.keys(r||{}).forEach(function(n){t(e,n,r[n])}),e}function n(t,r,n){return Object.keys(n||{}).forEach(function(o){e(t,r,o,n[o])}),t}function o(t,e){return r(s.createElementNS(a,t),e)}function i(t){return s.createTextNode(t)}var a="http://www.w3.org/2000/svg",s={};return{SVGNS:a,XLINKNS:"http://www.w3.org/1999/xlink",init:function(t){s=t},setAttribute:t,setAttributes:r,setAttributesNS:n,createElement:o,createTextNode:i}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/getdiagonalangle",[],function(){"use strict";function t(t){return 360*t/(2*Math.PI)}return function(e){return 0-t(Math.atan(e.height/e.width))}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/round",[],function(){"use strict";return function(t,e){return e?Math.round(t*Math.pow(10,e),e)/Math.pow(10,e):Math.round(t)}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/svgprimitives",["require","./domprimitives","./getdiagonalangle","../../../lib/lodash/lodash.custom","./round"],function(t){function e(t,e){return f(t,h).toString()+","+f(e,h).toString()+" "}function r(t,r,n){return t+e(r,n)}function n(t,e,r,n){return u.createElement("marker",{orient:r,id:t,class:e,viewBox:Boolean(n)?n:"0 0 10 10",refX:"9",refY:"3",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10"})}function o(t,e){var r=u.createElement("a");return u.setAttributesNS(r,u.XLINKNS,{"xlink:href":t,"xlink:title":t}),r.appendChild(e),r}function i(t,e){var r=u.createElement("tspan"),n=u.createTextNode(t);return r.appendChild(n),e?o(e,r):r}function a(t,e,r){var n=d.defaults(r,{class:null,url:null,id:null,idurl:null}),o=u.createElement("text",{x:f(e.x,h).toString(),y:f(e.y,h).toString(),class:n.class});if(o.appendChild(i(t,n.url)),n.id){var a=i(" ["+n.id+"]",n.idurl);a.setAttribute("style",g),o.appendChild(a)}return o}function s(t,e){var r=d.defaults(e,{class:null,style:null,color:null,bgColor:null});return c(u.createElement("path",{d:t,class:r.class,style:r.style}),r.color,r.bgColor)}function c(t,e,r){var n="";return r&&(n+="fill:"+r+";"),e&&(n+="stroke:"+e+";"),u.setAttribute(t,"style",n)}var u=t("./domprimitives"),l=t("./getdiagonalangle"),d=t("../../../lib/lodash/lodash.custom"),f=t("./round"),h=2,g="vertical-align:text-top;";return g+="font-size:0.7em;text-anchor:start;",{init:function(t){u.init(t)},createSVG:function(t,e){return u.createElement("svg",{version:"1.1",id:t,class:e,xmlns:u.SVGNS,"xmlns:xlink":u.XLINKNS,width:"0",height:"0"})},updateSVG:function(t,e){u.setAttributes(t,e)},colorBox:c,createDesc:function(){return u.createElement("desc")},createDefs:function(){return u.createElement("defs")},createTSpan:i,createText:a,createDiagonalText:function(t,e,r){return u.setAttributes(a(t,{x:e.width/2,y:e.height/2},{class:r}),{transform:"rotate("+f(l(e),h).toString()+" "+f(e.width/2,h).toString()+" "+f(e.height/2,h).toString()+")"})},createSingleLine:function(t,e){return u.createElement("line",{x1:f(t.xFrom,h).toString(),y1:f(t.yFrom,h).toString(),x2:f(t.xTo,h).toString(),y2:f(t.yTo,h).toString(),class:e?e.class:null})},createRect:function(t,e){var r=d.defaults(e,{class:null,color:null,bgColor:null,rx:null,ry:null});return c(u.createElement("rect",{width:f(t.width,h),height:f(t.height,h),x:f(t.x,h),y:f(t.y,h),rx:f(r.rx,h),ry:f(r.ry,h),class:r.class}),r.color,r.bgColor)},createUTurn:function(t,n,o,i,a,c){var u=d.defaults(a,{dontHitHome:!1,lineWidth:1}),l=u.dontHitHome?t.x+7.5*a.lineWidth:t.x;return s(r("M",t.x,t.y-c/2)+r("C",t.x+o,t.y-7.5*a.lineWidth/2)+e(t.x+o,n+0)+e(l,n),{class:i})},createGroup:function(t,e){return u.createElement("g",{id:t,class:e})},createPath:s,createMarkerPath:function(t,e,r){var o=n(t,"arrow-marker","auto");return o.appendChild(s(e,{class:"arrow-style",style:"stroke-dasharray:100,1;stroke:"+r||"black"})),o},createMarkerPolygon:function(t,e,r){var o=n(t,"arrow-marker","auto");return o.appendChild(u.createElement("polygon",{points:e,class:"arrow-style",stroke:r||"black",fill:r||"black"})),o},createTitle:function(t){var e=u.createElement("title"),r=u.createTextNode(t);return e.appendChild(r),e},point2String:e,pathPoint2String:r}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/variationhelpers",[],function(){"use strict";function t(t,e,r){var n=0;return e.indexOf("nodi")<0&&e.indexOf("bidi")>-1&&(n=t.xTo>t.xFrom?7.5*r:-7.5*r),n}function e(t,e,r){var n=0;return e.indexOf("nodi")<0&&(n=t.xTo>t.xFrom?-7.5*r:7.5*r),n}function r(t){var e=Math.abs(t.xTo-t.xFrom),r=Math.abs(t.yTo-t.yFrom);return Math.sqrt(e*e+r*r)}function n(t,e){var n=r(t);return n>0?Math.floor(n/e):0}function o(t){var e=t.xTo>t.xFrom?1:-1;return{signX:e,signY:t.yTo>t.yFrom?1:-1,dy:e*(t.yTo-t.yFrom)/(t.xTo-t.xFrom)}}function i(t){return Math.round(2*Math.random()*t)-t}function a(t){return Math.round(100*t)/100}function s(t,e,s){if(e<=0)throw new Error("pInterval must be > 0");e=Math.min(r(t),e);for(var c=[],u=n(t,e),l=o(t),d=l.signX*Math.sqrt(Math.pow(e,2)/(1+Math.pow(l.dy,2))),f=l.signY*(Math.abs(l.dy)===1/0?e:Math.sqrt(Math.pow(l.dy,2)*Math.pow(e,2)/(1+Math.pow(l.dy,2)))),h={},g=1;g<=u;g++)h={controlX:a(t.xFrom+(g-.5)*d+i(s)),controlY:a(t.yFrom+(g-.5)*f+i(s)),x:a(t.xFrom+g*d),y:a(t.yFrom+g*f)},e>r({xFrom:h.x,yFrom:h.y,xTo:t.xTo,yTo:t.yTo})&&(h.x=t.xTo,h.y=t.yTo),c.push(h);return c}return{round:a,determineStartCorrection:t,determineEndCorrection:e,getDirection:o,getLineLength:r,getNumberOfSegments:n,getBetweenPoints:s}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/straight",["require","./svgprimitives","./variationhelpers","../../../lib/lodash/lodash.custom"],function(t){function e(t,e){var r=e.lineWidth||1,n=r,o=e?e.class:null,i=s.getDirection(t),c=s.determineEndCorrection(t,o,r),u=s.determineStartCorrection(t,o,r),l=(t.xTo-t.xFrom+c-u).toString(),d=(t.yTo-t.yFrom).toString(),f=a.pathPoint2String("l",i.signX,i.dy),h=a.pathPoint2String("l",l,d);return a.createPath(a.pathPoint2String("M",t.xFrom,t.yFrom-7.5*r*i.dy)+f+a.pathPoint2String("M",t.xFrom+u,t.yFrom-n)+h+a.pathPoint2String("M",t.xFrom+u,t.yFrom+n)+h+a.pathPoint2String("M",t.xTo-i.signX,t.yTo+7.5*r*i.dy)+f,e)}function r(t,e){var r=e?e.lineWidth||1:1,n=Math.max(9,Math.min(4.5*r,t.height/2)),o=n.toString(10);return a.createPath(a.pathPoint2String("M",t.x,t.y)+a.pathPoint2String("l",t.width-n,0)+a.pathPoint2String("l",0,o)+a.pathPoint2String("l",o,0)+a.pathPoint2String("m",-o,-o)+a.pathPoint2String("l",o,o)+a.pathPoint2String("l",0,t.height-n)+a.pathPoint2String("l",-t.width,0)+a.pathPoint2String("l",0,-t.height)+"z",e)}function n(t,e){return e.rx=6,e.ry=6,a.createRect(t,e)}function o(t,e){return a.createPath(a.pathPoint2String("M",t.x,t.y+t.height/2)+a.pathPoint2String("l",3,-t.height/2)+a.pathPoint2String("l",t.width-6,0)+a.pathPoint2String("l",3,t.height/2)+a.pathPoint2String("l",-3,t.height/2)+a.pathPoint2String("l",-(t.width-6),0)+"z",e)}function i(t,e){var r=e&&e.foldSize?e.foldSize:7,n=c.defaults(e,{class:null,color:null,bgColor:null});return a.createPath(a.pathPoint2String("M",t.x,t.y)+a.pathPoint2String("l",t.width,0)+a.pathPoint2String("l",0,t.height-r)+a.pathPoint2String("l",-r,r)+a.pathPoint2String("l",-(t.width-r),0),n)}var a=t("./svgprimitives"),s=t("./variationhelpers"),c=t("../../../lib/lodash/lodash.custom");return{createSingleLine:a.createSingleLine,createDoubleLine:e,createNote:r,createRect:a.createRect,createABox:o,createRBox:n,createEdgeRemark:i,createDesc:a.createDesc,createDefs:a.createDefs,createDiagonalText:a.createDiagonalText,createTSpan:a.createTSpan,createText:a.createText,createUTurn:a.createUTurn,createGroup:a.createGroup,createMarkerPath:a.createMarkerPath,createMarkerPolygon:a.createMarkerPolygon,createTitle:a.createTitle,createSVG:a.createSVG,updateSVG:a.updateSVG,init:a.init}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/wobbly",["require","./svgprimitives","./variationhelpers"],function(t){function e(t){return t.map(function(t){return f.pathPoint2String("S",t.controlX,t.controlY)+" "+f.point2String(t.x,t.y)}).join(" ")}function r(t,r){var n=h.getDirection(t);return f.createPath(f.pathPoint2String("M",t.xFrom,t.yFrom)+f.pathPoint2String("L",h.round(t.xFrom+n.signX*Math.sqrt(1/(1+Math.pow(n.dy,2)))),t.yFrom+n.signY*(Math.abs(n.dy)===1/0?1:h.round(Math.sqrt(Math.pow(n.dy,2)/(1+Math.pow(n.dy,2))))))+e(h.getBetweenPoints(t,g,p)),{class:r?r.class:null})}function n(t,r){return f.pathPoint2String("M",t.x,t.y)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y,xTo:t.x+t.width-r,yTo:t.y},g,p))+f.pathPoint2String("L",t.x+t.width-r,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+r},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+r)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+r,xTo:t.x+t.width,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height,xTo:t.x,yTo:t.y},g,p))+f.pathPoint2String("L",t.x,t.y)+"z"}function o(t,r){return f.pathPoint2String("M",t.x+t.width-r,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y,xTo:t.x+t.width-r,yTo:t.y+r},g,p))+f.pathPoint2String("L",t.x+t.width-r,t.y+r)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y+r,xTo:t.x+t.width,yTo:t.y+r},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+r)}function i(t,e){var r=e?e.lineWidth||1:1,i=Math.max(9,Math.min(4.5*r,t.height/2)),a=f.createGroup();return a.appendChild(f.createPath(n(t,i),e)),e.bgColor="transparent",a.appendChild(f.createPath(o(t,i),e)),a}function a(t){return Boolean(t.y)||(t.y=0),f.pathPoint2String("M",t.x,t.y)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y,xTo:t.x+t.width,yTo:t.y},g,p))+f.pathPoint2String("L",t.x+t.width,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height,xTo:t.x,yTo:t.y},g,p))+"z"}function s(t,e){return f.createPath(a(t,e),e)}function c(t,r){return f.createPath(f.pathPoint2String("M",t.x,t.y+t.height/2)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height/2,xTo:t.x+3,yTo:t.y},g,p))+f.pathPoint2String("L",t.x+3,t.y)+e(h.getBetweenPoints({xFrom:t.x+3,yFrom:t.y,xTo:t.x+t.width-3,yTo:t.y},g,p))+f.pathPoint2String("L",t.x+t.width-3,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-3,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height/2},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+t.height/2)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height/2,xTo:t.x+t.width-3,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x+t.width-3,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width-3,yFrom:t.y+t.height,xTo:t.x+3,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x+3,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+3,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height/2},g,p))+"z",r)}function u(t,r){return f.createPath(f.pathPoint2String("M",t.x,t.y+6)+e([{controlX:t.x,controlY:t.y,x:t.x+6,y:t.y}])+e(h.getBetweenPoints({xFrom:t.x+6,yFrom:t.y,xTo:t.x+t.width-6,yTo:t.y},g,p))+f.pathPoint2String("L",t.x+t.width-6,t.y)+e([{controlX:t.x+t.width,controlY:t.y,x:t.x+t.width,y:t.y+6}])+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+6,xTo:t.x+t.width,yTo:t.y+t.height-6},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+t.height-6)+e([{controlX:t.x+t.width,controlY:t.y+t.height,x:t.x+t.width-6,y:t.y+t.height}])+e(h.getBetweenPoints({xFrom:t.x+t.width-6,yFrom:t.y+t.height,xTo:t.x+6,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x+6,t.y+t.height)+e([{controlX:t.x,controlY:t.y+t.height,x:t.x,y:t.y+t.height-6}])+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height-6,xTo:t.x,yTo:t.y+6},g,p))+"z",r)}function l(t,r){var n=r?r.lineWidth||1:1,o=f.createGroup(),i=r&&r.foldSize?r.foldSize:7,a=r&&r.color?r.color:"black";r.color="transparent!important";var s=f.createPath(f.pathPoint2String("M",t.x,t.y+n/2)+f.pathPoint2String("L",t.x+t.width,t.y+n/2)+f.pathPoint2String("L",t.x+t.width,t.y+t.height-i)+f.pathPoint2String("L",t.x+t.width-i,t.y+t.height)+f.pathPoint2String("L",t.x,t.y+t.height)+"z",r);r.bgColor="transparent",r.color=a;var c=f.createPath(f.pathPoint2String("M",t.x+t.width,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height-i},g,p))+f.pathPoint2String("L",t.x+t.width,t.y+t.height-i)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height-i,xTo:t.x+t.width-i,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x+t.width-i,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width-i,yFrom:t.y+t.height,xTo:t.x-1,yTo:t.y+t.height},g,p))+f.pathPoint2String("L",t.x-1,t.y+t.height),r);return o.appendChild(s),o.appendChild(c),o}function d(t,r){var n=r.lineWidth||1,o=n,i=r?r.class:null,a=h.getDirection(t),s=h.determineEndCorrection(t,i,n),c=h.determineStartCorrection(t,i,n);return f.createPath(f.pathPoint2String("M",t.xFrom,t.yFrom-7.5*n*a.dy)+f.pathPoint2String("l",a.signX,a.dy)+f.pathPoint2String("M",t.xFrom+c,t.yFrom-o)+e(h.getBetweenPoints({xFrom:t.xFrom+c,yFrom:t.yFrom-o,xTo:t.xTo+s,yTo:t.yTo-o},g,p))+f.pathPoint2String("M",t.xFrom+c,t.yFrom+o)+e(h.getBetweenPoints({xFrom:t.xFrom+c,yFrom:t.yFrom+o,xTo:t.xTo+s,yTo:t.yTo+o},g,p))+f.pathPoint2String("M",t.xTo-a.signX,t.yTo+7.5*n*a.dy)+f.pathPoint2String("l",a.signX,a.dy),i)}var f=t("./svgprimitives"),h=t("./variationhelpers"),g=70,p=3;return{createSingleLine:r,createDoubleLine:d,createNote:i,createRect:s,createABox:c,createRBox:u,createEdgeRemark:l,createDesc:f.createDesc,createDefs:f.createDefs,createDiagonalText:f.createDiagonalText,createTSpan:f.createTSpan,createText:f.createText,createUTurn:f.createUTurn,createGroup:f.createGroup,createMarkerPath:f.createMarkerPath,createMarkerPolygon:f.createMarkerPolygon,createTitle:f.createTitle,createSVG:f.createSVG,updateSVG:f.updateSVG,init:f.init}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/index",["require","./straight","./wobbly","../../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t){return Boolean(t)?"wobbly"===t?n:r:i}var r=t("./straight"),n=t("./wobbly"),o=t("../../../lib/lodash/lodash.custom"),i=r,a={};return{init:function(t,e){i.init(t),a=o.defaults(e,{LINE_WIDTH:2,FONT_SIZE:12})},createSVG:function(t,r,n){return i=e(n),i.createSVG(t,r)},updateSVG:i.updateSVG,createTitle:i.createTitle,createDesc:i.createDesc,createDefs:i.createDefs,createTSpan:i.createTSpan,createRect:function(t,e,r,n){return i.createRect(t,{class:e,color:r,bgColor:n})},createRBox:function(t,e,r,n){return i.createRBox(t,{class:e,color:r,bgColor:n})},createABox:function(t,e,r,n){return i.createABox(t,{class:e,color:r,bgColor:n})},createNote:function(t,e,r,n){return i.createNote(t,{class:e,color:r,bgColor:n,lineWidth:a.LINE_WIDTH})},createEdgeRemark:function(t,e,r,n,o){return i.createEdgeRemark(t,{class:e,color:r,bgColor:n,foldSize:o,lineWidth:a.LINE_WIDTH})},createText:i.createText,createDiagonalText:i.createDiagonalText,createLine:function(t,e){return Boolean(e)&&Boolean(e.doubleLine)?(e.lineWidth||(e.lineWidth=a.LINE_WIDTH),i.createDoubleLine(t,e)):i.createSingleLine(t,e)},createUTurn:function(t,e,r,n,o,s){return i.createUTurn(t,e,r,n,{dontHitHome:o,lineWidth:a.LINE_WIDTH},s)},createGroup:i.createGroup,createMarkerPath:i.createMarkerPath,createMarkerPolygon:i.createMarkerPolygon}}),r("lib/mscgenjs-core/render/graphics/idmanager",[],function(){"use strict";var t="mscgenjs";return{setPrefix:function(e){t="mscgenjs"+e},get:function(e){return t+(e||"")}}}),r("lib/mscgenjs-core/render/graphics/svgutensils",["require","./idmanager","./svgelementfactory/index","../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t){var e=c.createSVG(t,s.get());return l.body.appendChild(e),e}function r(t){var r=l.getElementById(d);r=r||e(d),r.appendChild(t);var n=t.getBBox();return r.removeChild(t),n}function n(t){return Math.abs(t.height)>1e5||Math.abs(t.width)>1e5?{height:0,width:0,x:0,y:0}:t}function o(t){return"function"==typeof t.getBBox?n(r(t)):{height:15,width:15,x:2,y:2}}function i(){return o(c.createText("ÁjyÎ9ƒ@💩",{x:0,y:0})).height}function a(t){s.setPrefix(t);var e=l.getElementById(s.get());if(Boolean(e)){var r=l.getElementById(t);r?r.removeChild(e):l.body.removeChild(e)}}var s=t("./idmanager"),c=t("./svgelementfactory/index"),u=t("../../lib/lodash/lodash.custom"),l={},d=s.get("bboxer");return{init:function(t){l=t},removeRenderedSVGFromElement:a,getBBox:o,calculateTextHeight:u.memoize(i),webkitNamespaceBugWorkaround:function(t){return t.replace(/ xlink=/g," xmlns:xlink=","g").replace(/ href=/g," xlink:href=","g")}}}),r("lib/mscgenjs-core/render/graphics/renderutensils",["require","../../lib/lodash/lodash.custom"],function(t){"use strict";var e=t("../../lib/lodash/lodash.custom");return{scaleCanvasToWidth:function(t,r){var n=e.cloneDeep(r);return n.scale=t/n.width,n.width*=n.scale,n.height*=n.scale,n.horizontaltransform*=n.scale,n.verticaltransform*=n.scale,n.x=0-n.horizontaltransform,n.y=0-n.verticaltransform,n},determineDepthCorrection:function(t,e){return t?2*(t+1)*e*2:0},determineArcXTo:function(t,e,r){return"-x"===t?e+.75*(r-e):r}}}),r("lib/mscgenjs-core/render/graphics/constants",[],function(){"use strict";return{LINE_WIDTH:2,FONT_SIZE:12}}),r("lib/mscgenjs-core/render/graphics/csstemplates",[],function(){"use strict";return Object.freeze({baseTemplate:"svg.<%=id%>{font-family:Helvetica,sans-serif;font-size:<%=fontSize%>px;font-weight:normal;font-style:normal;text-decoration:none;background-color:white;stroke:black;stroke-width:<%=lineWidth%>}.<%=id%> path, .<%=id%> rect{fill:none}.<%=id%> .label-text-background{fill:white;stroke:white;stroke-width:0}.<%=id%> .bglayer{fill:white;stroke:white;stroke-width:0}.<%=id%> line{}.<%=id%> .return, .<%=id%> .comment{stroke-dasharray:5,3}.<%=id%> .inline_expression_divider{stroke-dasharray:10,5}.<%=id%> text{color:inherit;stroke:none;text-anchor:middle}.<%=id%> text.anchor-start{text-anchor:start}.<%=id%> .arrow-marker{overflow:visible}.<%=id%> .arrow-style{stroke-width:1}.<%=id%> .arcrow, .<%=id%> .arcrowomit, .<%=id%> .emphasised{stroke-linecap:butt}.<%=id%> .arcrowomit{stroke-dasharray:2,2}.<%=id%> .box, .<%=id%> .entity{fill:white;stroke-linejoin:round}.<%=id%> .inherit{stroke:inherit;color:inherit}.<%=id%> .inherit-fill{fill:inherit}.<%=id%> .watermark{font-size:48pt;font-weight:bold;opacity:0.14}",namedStyles:[Object.freeze({name:"basic",description:"Basic",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{text-decoration:underline;}"}),Object.freeze({name:"lazy",description:"Lazy",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{font-weight:bold;}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC}.<%=id%> rect.label-text-background{opacity:0.9}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke:grey}"}),Object.freeze({name:"classic",description:"Classic",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{text-decoration:none}.<%=id%> .entity{stroke:none;}.<%=id%> line,.<%=id%> rect,.<%=id%> path{stroke-width:1px}.<%=id%> .arrow-style{stroke-width:2;}.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke-width: 1px}"}),Object.freeze({name:"fountainpen",description:"Fountain pen",experimental:!0,deprecated:!1,renderMagic:"wobbly",cssBefore:"@import 'https://fonts.googleapis.com/css?family=Gochi+Hand';",cssAfter:"svg.<%=id%>{font-family:'Gochi Hand', cursive;font-size:14px;stroke-opacity:0.4;stroke-linecap:round;background-color:transparent}.<%=id%> text{fill:rgba(0,0,128,0.7)}.<%=id%> marker polygon{fill:rgba(0,0,255,0.4);stroke-linejoin:round}.<%=id%> line, .<%=id%> path, .<%=id%> rect, .<%=id%> polygon{stroke:blue !important}.<%=id%> text.entity-text{font-weight:bold;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC;}.<%=id%> .label-text-background{opacity:0}"}),Object.freeze({name:"cygne",description:"Cygne (best with msgenny)",experimental:!0,deprecated:!0,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> line, .<%=id%> path{stroke:#00A1DE}.<%=id%> text{fill:#005B82}.<%=id%> .entity,.<%=id%> .box{fill:#00A1DE;stroke:#00A1DE}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#E77B2F;stroke:white}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{fill:white}"}),Object.freeze({name:"pegasse",description:"Pégase (best with msgenny)",experimental:!1,deprecated:!0,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> line, .<%=id%> path{stroke:rgba(0, 43, 84, 1)}.<%=id%> text{fill:rgba(0, 43, 84, 1)}.<%=id%> .entity,.<%=id%> .box{fill:rgba(0, 43, 84, 1);stroke:rgba(0, 43, 84, 1)}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:rgba(255, 50, 0, 1);stroke:white}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{fill:white}"}),Object.freeze({name:"grayscaled",description:"Grayscaled (not in IE or Safari)",experimental:!0,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:"svg.<%=id%>{filter:grayscale(1);-webkit-filter:grayscale(1);}"}),Object.freeze({name:"inverted",description:"Inverted (not in IE or Safari)",experimental:!0,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:"svg.<%=id%>{filter:invert(1);-webkit-filter:invert(1);}"}),Object.freeze({name:"noentityboxes",description:"No entity boxes",experimental:!1,deprecated:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> .entity{fill:none;stroke:none;}.<%=id%> text.entity-text{text-decoration:underline;}"})]})}),r("lib/mscgenjs-core/render/graphics/renderskeleton",["require","./svgelementfactory/index","./constants","./csstemplates"],function(t){"use strict";function e(t,e){return e.forEach(function(e){"method"===e.type?t.appendChild(f.createMarkerPolygon(e.name,e.path,e.color)):t.appendChild(f.createMarkerPath(e.name,e.path,e.color))}),t}function r(t,e){var r=p.createElement("style");return r.setAttribute("type","text/css"),r.appendChild(p.createTextNode(d(t,e))),r}function n(t,n,o){var i=f.createDefs();return i.appendChild(r(o,t)),i=e(i,n)}function o(t){var e=f.createGroup(t+"_body");return e.appendChild(f.createGroup(t+"_background")),e.appendChild(f.createGroup(t+"_arcspans")),e.appendChild(f.createGroup(t+"_lifelines")),e.appendChild(f.createGroup(t+"_sequence")),e.appendChild(f.createGroup(t+"_notes")),e.appendChild(f.createGroup(t+"_watermark")),e}function i(t){return f.init(t.document,{LINE_WIDTH:h.LINE_WIDTH,FONT_SIZE:h.FONT_SIZE}),t.document}function a(t,e,r,a,c){p=i(t);var l=f.createSVG(r,r,u(c));return Boolean(c.source)&&l.appendChild(s(t,c.source)),l.appendChild(n(r,a,c)),l.appendChild(o(r)),e.appendChild(l),p}function s(t,e){var r=f.createDesc();return r.appendChild(t.document.createTextNode("\n\n# Generated by mscgen_js - https://sverweij.github.io/mscgen_js\n"+e)),r}function c(t){return g.namedStyles.find(function(e){return e.name===t})}function u(t){var e="",r=c(t.additionalTemplate);return Boolean(r)&&(e=r.renderMagic),e}function l(t,e){return(t.cssBefore||"")+g.baseTemplate+(t.cssAfter||"")+(e||"")}function d(t,e){return l(c(t.additionalTemplate)||{},t.styleAdditions).replace(/<%=fontSize%>/g,h.FONT_SIZE).replace(/<%=lineWidth%>/g,h.LINE_WIDTH).replace(/<%=id%>/g,e)}var f=t("./svgelementfactory/index"),h=t("./constants"),g=t("./csstemplates"),p={};return{bootstrap:a,init:i}}),r("lib/mscgenjs-core/render/astmassage/asttransform",[],function(){"use strict";function t(t,e){t&&e&&t.forEach(function(t){e.forEach(function(e){e(t)})})}function e(t,e,r,n){n&&n.forEach(function(n){n(r,t,e)})}function r(t,r,o){r.forEach(function(i){e(t,r,i,o),i.arcs&&n(t,i.arcs,o)})}function n(t,e,n){t&&e&&n&&e.forEach(function(e){r(t,e,n)})}return function(e,r,o){return t(e.entities,r),n(e.entities,e.arcs,o),e}}),r("lib/mscgenjs-core/render/astmassage/aggregatekind",[],function(){"use strict";var t=Object.freeze({"|||":"emptyarc","...":"emptyarc","---":"emptyarc","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression",
else:"inline_expression",opt:"inline_expression",break:"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"});return function(e){return t[e]}}),r("lib/mscgenjs-core/render/astmassage/normalizekind",[],function(){"use strict";var t=Object.freeze({"<-":"->","<=":"=>","<<=":"=>>","<<":">>","<:":":>","x-":"-x"});return function(e){return t[e]||e}}),r("lib/mscgenjs-core/render/astmassage/normalizeoptions",["require","../../lib/lodash/lodash.custom"],function(t){"use strict";var e=t("../../lib/lodash/lodash.custom");return function(t){return e.defaults(t||{},{wordwraparcs:!1,wordwrapentities:!0,wordwrapboxes:!0})}}),r("lib/mscgenjs-core/render/textutensils/escape",[],function(){"use strict";return{unescapeString:function(t){return t.replace(/\\"/g,'"')},escapeString:function(t){return t.replace(/\\"/g,'"').replace(/"/g,'\\"')}}}),r("lib/mscgenjs-core/render/astmassage/flatten",["require","./asttransform","./aggregatekind","./normalizekind","./normalizeoptions","../../lib/lodash/lodash.custom","../textutensils/escape"],function(t){"use strict";function e(t){void 0===t.label&&(t.label=t.name)}function r(t){Boolean(t.label)&&(t.label=b.unescapeString(t.label)),Boolean(t.id)&&(t.id=b.unescapeString(t.id))}function n(t){t.label=Boolean(t.label)?t.label:""}function o(t){if(t.kind&&g(t.kind)!==t.kind){t.kind=g(t.kind);var e=t.from;t.from=t.to,t.to=e}return t}function i(t,e){!t.linecolor&&e.arclinecolor&&(t.linecolor=e.arclinecolor),!t.textcolor&&e.arctextcolor&&(t.textcolor=e.arctextcolor),!t.textbgcolor&&e.arctextbgcolor&&(t.textbgcolor=e.arctextbgcolor)}function a(t,e){if(t&&t.from){var r=e.filter(function(e){return e.name===t.from});r.length>0&&i(t,r[0])}}function s(t){return t.arcs.reduce(function(t,e){return t+(Boolean(e[0].arcs)?s(e[0])+1:0)},t.arcs.length)}function c(t,e,r,n){var o=[],a=[],u=[];return t.forEach(function(t){if("inline_expression"===h(t.kind)){if(t.depth=e,t.isVirtual=!0,Boolean(t.arcs)){var o=m.cloneDeep(t);o.numberofrows=s(o),delete o.arcs,a.push(o),t.arcs.forEach(function(t){u=u.concat(c(t,e+1,o.from,o.to)),t.forEach(function(t){i(t,o)})}),e>y&&(y=e)}else a.push(t);u.push([{kind:"|||",from:t.from,to:t.to,isVirtual:!0}])}else r&&n&&"emptyarc"===h(t.kind)&&(t.from=r,t.to=n,t.depth=e),a.push(t)}),o.push(a),o.concat(u)}function u(t){var e={};return y=0,Boolean(t.options)&&(e.options=m.cloneDeep(t.options)),Boolean(t.entities)&&(e.entities=m.cloneDeep(t.entities)),e.arcs=[],t&&t.arcs&&t.arcs.forEach(function(t){c(t,0).forEach(function(t){e.arcs.push(t)})}),e.depth=y+1,e}function l(t,e){return t.filter(function(t){return e.from!==t.name}).map(function(t){return e.to=t.name,m.cloneDeep(e)})}function d(t){if(t.entities&&t.arcs){var e=[],r={};t.arcs.forEach(function(n,o){n.filter(function(t){return"*"===t.to}).forEach(function(i,a){r=m.cloneDeep(i),delete t.arcs[o][a],e=l(t.entities,r),n[a]=e.shift(),t.arcs[o]=n.concat(e)})})}return t}var f=t("./asttransform"),h=t("./aggregatekind"),g=t("./normalizekind"),p=t("./normalizeoptions"),m=t("../../lib/lodash/lodash.custom"),b=t("../textutensils/escape"),y=0;return{swapRTLArc:o,unwind:u,explodeBroadcasts:d,flatten:function(t){return t.options=p(t.options),f(u(t),[e,r],[o,a,r,n])},dotFlatten:function(t){return d(f(t,[e],[o,a]))}}}),r("lib/mscgenjs-core/render/graphics/kind2class",[],function(){"use strict";var t=Object.freeze({"|||":"empty-row","...":"omitted-row","---":"comment-row","->":"signal","=>":"method","=>>":"callback",">>":"return",":>":"emphasised","-x":"lost","<-":"signal","<=":"method","<<=":"callback","<<":"return","<:":"emphasised","x-":"lost","<->":"signal","<=>":"method","<<=>>":"callback","<<>>":"return","<:>":"emphasised","--":"signal","==":"method","..":"return","::":"emphasised"}),e=Object.freeze({"|||":"empty","...":"empty","---":"empty","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression",else:"inline_expression",opt:"inline_expression",break:"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"});return{getClass:function(e){return t[e]||e},getAggregateClass:function(t){return e[t]||t}}}),r("lib/mscgenjs-core/render/graphics/rowmemory",[],function(){"use strict";function t(t){return r[t]?r[t]:{y:n+1.5*o+t*o,height:o}}function e(){return t(r.length-1)}var r=[],n=0,o=0;return{clear:function(t,e){r=[],n=t,o=e},get:t,getByRealRowNumber:function(t){var n=r.find(function(e){return e.realRowNumber===t});return void 0===n&&(n=e()),n},getLast:e,set:function(e,n,o){var i=t(e-1);r[e]={y:i.y+(i.height+n)/2,height:n,realRowNumber:o}}}}),r("lib/mscgenjs-core/render/graphics/markermanager",["require","../../lib/lodash/lodash.custom","../astmassage/normalizekind"],function(t){"use strict";function e(t,e,r){return e&&r&&["<->","->"].indexOf(t)>-1?e<r?"signal":"signal-u":""}function r(t,e,r){return"<->"===t&&e<=r?"signal-l":"signal-lu"}function n(t,n,o,i,a){var s=[];return l[n]&&l[n].attributes&&(s=l[n].attributes.map(function(s){return{name:s.name,value:s.value.replace(/\{\{signal-marker-end\}\}/g,e(n,i,a)).replace(/\{\{signal-marker-start\}\}/g,r(n,i,a)).replace(/\{\{id\}\}/g,t).replace(/\{\{color\}\}/g,o||"black")}})),s}function o(t,e){return l[u(t)].marker.name+(Boolean(e)?" "+e:" black")}function i(t,e){function r(e){i(t,e)}return Array.isArray(e)&&e.forEach(r),e.arcs&&e.arcs.forEach(r),e.kind&&l[u(e.kind)]&&l[u(e.kind)].marker&&t.indexOf(o(e.kind,e.linecolor))<0&&t.push(o(e.kind,e.linecolor)),t}function a(t){return{kind:t.split(" ")[0],color:t.split(" ")[1]}}function s(t){return t.arcs.reduce(i,[]).sort().map(a)}var c=t("../../lib/lodash/lodash.custom"),u=t("../astmassage/normalizekind"),l={"->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"}],marker:{name:"signal"}},"<->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"},{name:"marker-start",value:"url(#{{id}}{{signal-marker-start}}-{{color}})"}],marker:{name:"signal"}},"=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},">>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},"..":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"--":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"==":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"::":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},":>":{attributes:[{name:"style",value:"stroke:{{color}};"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<:>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},"-x":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}lost-{{color}})"}],marker:{name:"lost",end:""}}},d={signal:{variants:[{name:"",path:"M9,3 l-8, 2"},{name:"-u",path:"M9,3 l-8,-2"},{name:"-l",path:"M9,3 l 8, 2"},{name:"-lu",path:"M9,3 l 8,-2"}]},method:{variants:[{name:"",path:"1,1  9,3  1,5"},{name:"-l",path:"17,1 9,3 17,5"}]},callback:{variants:[{name:"",path:"M 1,1 l 8,2 l-8,2"},{name:"-l",path:"M17,1 l-8,2 l 8,2"}]},lost:{variants:[{name:"",path:"M7,0 l5,6 M7,6 l5,-6"}]}};return{getAttributes:n,getMarkerDefs:function(t,e){return c.flatten(s(e).map(function(e){return d[e.kind].variants.map(function(r){return{name:t+e.kind+r.name+"-"+e.color,path:r.path,color:e.color,type:e.kind}})}))}}}),r("lib/mscgenjs-core/render/textutensils/wrap",[],function(){"use strict";return function(t,e){for(var r=0,n=[],o=0,i=0,a=0,s=0,c=t.replace(/[\t\n]+/g," ").replace(/\\n/g,"\n");s<=c.length;)s>=c.length?n.push(c.substring(o,s)):"\n"===c[s]?(r=0,a=s,n.push(c.substring(o,a)),o=a+1):r++>=e&&(a=c.substring(0,s).lastIndexOf(" "),-1===a||a<o?(r=1,a=s,i=s):(r=0,i=a+1),n.push(c.substring(o,a)),o=i),s++;return n}}),r("lib/mscgenjs-core/render/graphics/renderlabels",["require","./svgelementfactory/index","./svgutensils","./constants","../textutensils/wrap","./kind2class","../astmassage/aggregatekind"],function(t){"use strict";function e(t,e){e&&t.setAttribute("style","fill:"+e+";")}function r(t,r,n){e(t,r&&!n?"blue":n)}function n(t,e){var r=l.createRect(d.getBBox(t),"label-text-background");return e&&r.setAttribute("style","fill:"+e+"; stroke:"+e+";"),r}function o(t,e,r,n,o,i){return 0===t?l.createText(e,{x:r,y:n},{class:o,url:i.url,id:i.id,idurl:i.idurl}):l.createText(e,{x:r,y:n},{class:o,url:i.url})}function i(t,e,r){var n=e||t,o=g.getClass(n),i=g.getAggregateClass(n);return o===i?o+r:i+r+o+r}function a(t,n,a,s,c,u){var l=a+(c+.25)*d.calculateTextHeight(),h=i(s.kind,u&&u.kind,"-text ");u&&(u.alignLeft&&(h+="anchor-start "),u.alignAround&&(l=a+(c+.25)*(d.calculateTextHeight()+f.LINE_WIDTH)));var g=o(c,t,n,l,h,s);return e(g,s.textcolor),r(g,s.url,s.textcolor),g}function s(t,e,r,o){var i=l.createGroup(o);if(t.label){var s=e.x+e.width/2,c=u(t.label,t.kind,e.width,f.FONT_SIZE,r),h={};r&&r.alignAbove&&c.forEach(function(){c.push("")});var g=e.y-(c.length-1)/2*(d.calculateTextHeight()+1);r&&r.alignAround&&(1===c.length&&c.push(""),g=e.y-(c.length-1)/2*(d.calculateTextHeight()+f.LINE_WIDTH+1)),c.forEach(function(e,o){""!==e&&(h=a(e,s,g,t,o,r),r&&r.ownBackground&&i.appendChild(n(h,t.textbgcolor)),i.appendChild(h)),g++})}return i}function c(t,e){var r=Math.abs(t);return r<=160?r/(e/12*8):r<=320?r/(e/12*6.4):r<=480?r/(e/12*5.9):r/(e/12*5.6)}function u(t,e,r,n,o){return"box"===p(e)&&o.wordwrapboxes||"entity"===e&&o.wordwrapentities||"box"!==p(e)&&"entity"!==e&&o.wordwraparcs||void 0===e?h(t,c(r,n)):t.split("\\n")}var l=t("./svgelementfactory/index"),d=t("./svgutensils"),f=t("./constants"),h=t("../textutensils/wrap"),g=t("./kind2class"),p=t("../astmassage/aggregatekind");return{createLabel:s,splitLabel:u}}),r("lib/mscgenjs-core/render/graphics/entities",["require","./renderlabels","./svgelementfactory/index","./svgutensils","./constants","../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t){return p[t]}function r(t,e){p[t.name]=e+g.width/2}function n(){return g}function o(t,e,r){return u.splitLabel(t,"entity",g.width,e,r).length}function i(t,e){var r=Math.min(d.getBBox(t).width+4*f.LINE_WIDTH,e.interEntitySpacing/3+e.width);return r>=e.width&&(e.x-=(r-e.width)/2,e.width=r),e}function a(t,e,r,n){var o=l.createGroup(),a=h.cloneDeep(g);a.x=e||0,a.y=r||0;var s=u.createLabel(h.defaults(t,{kind:"entity"}),{x:a.x,y:r+a.height/2,width:a.width},n);return o.appendChild(l.createRect(i(s,a),"entity",t.linecolor,t.textbgcolor)),o.appendChild(s),o}function s(t,e,n){var o=l.createGroup();return g.entityXHWM=0,g.height=c(t,n)+2*f.LINE_WIDTH,t.forEach(function(t){o.appendChild(a(t,g.entityXHWM,e,n)),r(t,g.entityXHWM),g.entityXHWM+=g.interEntitySpacing}),o}function c(t,e){var r=t[0],n=2;return t.forEach(function(t){var i=o(t.label,f.FONT_SIZE,e);i>n&&(n=i,r=t)}),n>2?Math.max(g.height,d.getBBox(a(r,0,0,e)).height):g.height}var u=t("./renderlabels"),l=t("./svgelementfactory/index"),d=t("./svgutensils"),f=t("./constants"),h=t("../../lib/lodash/lodash.custom"),g=Object.seal({interEntitySpacing:160,height:34,width:100,entityXHWM:0}),p={};return{init:function(t){g.interEntitySpacing=160,g.height=34,g.width=100,g.entityXHWM=0,t&&(g.interEntitySpacing=160*t,g.width=100*t),p={}},getX:e,getOAndD:function(t,r){return{from:e(e(t)<e(r)?t:r),to:e(e(r)>e(t)?r:t)}},getDims:n,renderEntities:s}}),r("lib/mscgenjs-core/render/graphics/renderast",["require","./svgelementfactory/index","./svgutensils","./renderutensils","./renderskeleton","../astmassage/flatten","./kind2class","../astmassage/aggregatekind","./rowmemory","./idmanager","./markermanager","./entities","./renderlabels","./constants","../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t,e){return t.document.getElementById(e)||t.document.body}function r(t,r,a,s){var c=Object.freeze(H.flatten(t)),u=e(r,a);return G.setPrefix(a),n(c,r,u,s||{}),o(c),i(c),M.webkitNamespaceBugWorkaround(u.innerHTML)}function n(t,e,r,n){J.document=N.bootstrap(e,r,G.get(),q.getMarkerDefs(G.get(),t),n),J.mirrorEntitiesOnBottom=n.mirrorEntitiesOnBottom,J.regularArcTextVerticalAlignment=n.regularArcTextVerticalAlignment,M.init(J.document),J.layer=a(J.document),J.maxDepth=t.depth,c(J,t.options)}function o(t){p(t.entities,0,t.options),z.clear(X.getDims().height,J.arcRowHeight),v(t.arcs,t.entities,t.options),J.mirrorEntitiesOnBottom&&g(t.entities,t.options)}function i(t){var e=u(t);l(e),e=f(t.options,e),h(e)}function a(t){return{lifeline:t.getElementById(G.get("_lifelines")),sequence:t.getElementById(G.get("_sequence")),notes:t.getElementById(G.get("_notes")),inline:t.getElementById(G.get("_arcspans")),watermark:t.getElementById(G.get("_watermark"))}}function s(t,e){t.arcRowHeight=$,t.arcGradient=K,t.wordWrapArcs=!1,e&&(e.arcgradient&&(t.arcRowHeight=parseInt(e.arcgradient,10)+$,t.arcGradient=parseInt(e.arcgradient,10)+K),t.wordWrapArcs=Boolean(e.wordwraparcs))}function c(t,e){X.init(e&&e.hscale),s(t,e)}function u(t){var e=O.determineDepthCorrection(t.depth,U.LINE_WIDTH),r=z.getLast(),n={width:t.entities.length*X.getDims().interEntitySpacing+e,height:Boolean(J.mirrorEntitiesOnBottom)?2*X.getDims().height+r.y+r.height+2*Z:r.y+r.height/2+2*Z,horizontaltransform:(X.getDims().interEntitySpacing+e-X.getDims().width)/2,autoscale:!!t.options&&!!t.options.width&&"auto"===t.options.width,verticaltransform:Z,scale:1};return n.x=0-n.horizontaltransform,n.y=0-n.verticaltransform,n}function l(t){J.document.getElementById(G.get("_background")).appendChild(I.createRect(t,"bglayer"))}function d(t,e){J.layer.watermark.appendChild(I.createDiagonalText(t,e,"watermark"))}function f(t,e){return t&&(t.watermark&&d(t.watermark,e),t.width&&"auto"!==t.width&&(e=O.scaleCanvasToWidth(t.width,e))),e}function h(t){var e=J.document.getElementById(G.get());J.document.getElementById(G.get("_body")).setAttribute("transform","translate("+t.horizontaltransform+","+t.verticaltransform+") scale("+t.scale+","+t.scale+")"),t.autoscale&&!0===t.autoscale?I.updateSVG(e,{width:"100%",height:"100%",viewBox:"0 0 "+t.width.toString()+" "+t.height.toString()}):I.updateSVG(e,{width:t.width.toString(),height:t.height.toString(),viewBox:"0 0 "+t.width.toString()+" "+t.height.toString()})}function g(t,e){var r=z.getLast().y+(z.getLast().height+J.arcRowHeight)/2;_(t,"arcrow",null,r).forEach(function(t){J.layer.lifeline.appendChild(t)}),p(t,r+J.arcRowHeight/2,e)}function p(t,e,r){J.layer.sequence.appendChild(X.renderEntities(t,e,r)),J.arcEndX=X.getDims().entityXHWM-X.getDims().interEntitySpacing+X.getDims().width}function m(t,e,r,n,o){var i=0,a=t.label,s=X.getX(t.from);t.label="",e.forEach(function(e){var a={};e.name!==t.from&&(i=X.getX(e.name),a=j(t,s,i,n,o),r.push({layer:J.layer.sequence,element:a}))}),t.label=a}function b(t,e,r,n,o){var i={};return t.from&&t.to&&("*"===t.to?(m(t,e,r,n,o),i=V.createLabel(t,{x:0,y:z.get(n).y,width:J.arcEndX},Y.defaults(Y.cloneDeep(o),{alignAround:!0,ownBackground:!0})),r.push({title:t.title,layer:J.layer.sequence,element:i})):(i=j(t,X.getX(t.from),X.getX(t.to),n,o),r.push({title:t.title,layer:J.layer.sequence,element:i}))),i}function y(t,e,r,n){var o=0;return t.forEach(function(t){var e={};switch(W(t.kind)){case"emptyarc":e=L(t,0);break;case"box":e=D(X.getOAndD(t.from,t.to),t,0,n);break;case"inline_expression":e=C(t,0);break;default:var i=Y.cloneDeep(t);i.arcskip=0,e=b(i,r,[],0,n)}o=Math.max(o,M.getBBox(e).height+2*U.LINE_WIDTH)}),o}function x(t,e,r,n){var o="arcrow",i=[];t.forEach(function(t){var a={};switch(W(t.kind)){case"emptyarc":a=L(t,z.get(e).y),"..."===t.kind&&(o="arcrowomit"),i.push({layer:J.layer.sequence,element:a});break;case"box":a=D(X.getOAndD(t.from,t.to),t,z.get(e).y,n),i.push({title:t.title,layer:J.layer.notes,element:a});break;case"inline_expression":a=C(t,z.get(e).y),i.push({layer:J.layer.notes,element:a}),Q.push({arc:t,rownum:e});break;default:a=b(t,r,i,e,n)}}),_(r,o,z.get(e).height,z.get(e).y).forEach(function(t){J.layer.lifeline.appendChild(t)}),i.forEach(function(t){t.element&&(t.title&&t.element.appendChild(I.createTitle(t.title)),t.layer.appendChild(t.element))})}function w(t,e,r){var n=0;t.forEach(function(t,o){function i(t){return t.isVirtual}t.every(i)?z.set(o,Math.max(z.get(o).height,y(t,o,e,r))):(z.set(o,Math.max(z.get(o).height,y(t,o,e,r)),n),n++)})}function v(t,e,r){Q=[],_(e,"arcrow",null,z.get(-1).y).forEach(function(t){J.layer.lifeline.appendChild(t)}),t&&(w(t,e,r),t.forEach(function(t,n){x(t,n,e,r)}),k(Q))}function C(t,e){var r=X.getOAndD(t.from,t.to),n=e>0,o=2*J.maxDepth*U.LINE_WIDTH,i=r.to-r.from+(X.getDims().interEntitySpacing-2*U.LINE_WIDTH)-7-U.LINE_WIDTH,a=r.from-(X.getDims().interEntitySpacing-3*U.LINE_WIDTH-o)/2-2*(J.maxDepth-t.depth)*U.LINE_WIDTH,s=I.createGroup();n||(t.label=t.kind+(t.label?": "+t.label:""));var c=V.createLabel(t,{x:a+U.LINE_WIDTH-i/2,y:e+J.arcRowHeight/4,width:i},{alignLeft:!0,ownBackground:!1,wordwraparcs:J.wordWrapArcs}),u=M.getBBox(c),l=Math.max(u.height+2*U.LINE_WIDTH,J.arcRowHeight/2-2*U.LINE_WIDTH),d=Math.min(u.width+2*U.LINE_WIDTH,i),f=I.createEdgeRemark({width:d-U.LINE_WIDTH+7,height:l,x:a,y:e},"box inline_expression_label",t.linecolor,t.textbgcolor,7);return s.appendChild(f),s.appendChild(c),s}function k(t){t.forEach(function(t){J.layer.inline.appendChild(A(t,z.get(t.rownum).y))})}function A(t,e){var r=z.get(t.rownum).y,n=z.get(t.rownum+t.arc.numberofrows+1).y,o=n-r;return t.arc.label="",B(X.getOAndD(t.arc.from,t.arc.to),t.arc,o,e)}function _(t,e,r,n){return(!r||r<J.arcRowHeight)&&(r=J.arcRowHeight),t.map(function(t){var o=I.createLine({xFrom:X.getX(t.name),yFrom:0-r/2+(n||0),xTo:X.getX(t.name),yTo:r/2+(n||0)},{class:e});return t.linecolor&&o.setAttribute("style","stroke:"+t.linecolor+";"),o})}function T(t,e,r,n,o,i){var a=J.arcRowHeight/5*2,s=X.getDims().interEntitySpacing/2,c={},u="arc "+R.getAggregateClass(t)+" "+R.getClass(t);if(n){c=I.createGroup();var l=I.createUTurn({x:e,y:i},i+r+a-2*U.LINE_WIDTH,s-2*U.LINE_WIDTH,u,"::"!==t,a),d=I.createUTurn({x:e,y:i},i+r+a-U.LINE_WIDTH,s,null,null,a),f=I.createUTurn({x:e,y:i},i+r+a,s,u,"::"!==t,a);Boolean(o)&&l.setAttribute("style","stroke:"+o),q.getAttributes(G.get(),t,o,e,e).forEach(function(t){d.setAttribute(t.name,t.value)}),d.setAttribute("style","stroke:transparent;"),Boolean(o)&&f.setAttribute("style","stroke:"+o),c.appendChild(l),c.appendChild(f),c.appendChild(d),c.setAttribute("class",u)}else c=I.createUTurn({x:e,y:i},i+r+a,s,u,"-x"===t,a),q.getAttributes(G.get(),t,o,e,e).forEach(function(t){c.setAttribute(t.name,t.value)});return c}function L(t,e){return"---"===t.kind?P(t,X.getOAndD(t.from,t.to),e):F(t,X.getOAndD(t.from,t.to),e)}function S(t,e,r){var n=z.get(t).y+r;if(Boolean(e)){var o=Math.floor(e),i=e-o,a=z.get(t).realRowNumber;n=z.getByRealRowNumber(a+o).y+i*(z.getByRealRowNumber(a+o+1).y-z.getByRealRowNumber(a+o).y)}return n}function E(t){return"<:>"===t?"bidi ":"::"===t?"nodi ":""}function j(t,e,r,n,o){var i=I.createGroup(),a="arc ";a+=E(t.kind),a+=R.getAggregateClass(t.kind)+" "+R.getClass(t.kind);var s=[":>","::","<:>"].indexOf(t.kind)>-1,c=S(n,t.arcskip,J.arcGradient);if(r=O.determineArcXTo(t.kind,e,r),e===r){i.appendChild(T(t.kind,e,c-z.get(n).y-J.arcGradient,s,t.linecolor,z.get(n).y));var u=2*X.getDims().interEntitySpacing/3;i.appendChild(V.createLabel(t,{x:e+1.5*U.LINE_WIDTH-u/2,y:z.get(n).y-J.arcRowHeight/5-U.LINE_WIDTH/2,width:u},Y.defaults(Y.cloneDeep(o),{alignLeft:!0,alignAbove:!0,ownBackground:!0})))}else{var l=I.createLine({xFrom:e,yFrom:z.get(n).y,xTo:r,yTo:c},{class:a,doubleLine:s});q.getAttributes(G.get(),t.kind,t.linecolor,e,r).forEach(function(t){l.setAttribute(t.name,t.value)}),i.appendChild(l),i.appendChild(V.createLabel(t,{x:e,y:z.get(n).y+(c-z.get(n).y)/2,width:r-e},Y.defaults(Y.cloneDeep(o),{alignAround:!0,alignAbove:"above"===J.regularArcTextVerticalAlignment,ownBackground:!0})))}return i}function F(t,e,r){var n=0,o=J.arcEndX;return t.from&&t.to&&(n=e.from,o=e.to-e.from),V.createLabel(t,{x:n,y:r,width:o},{ownBackground:!0,wordwraparcs:J.wordWrapArcs})}function P(t,e,r){var n=0,o=J.arcEndX,i="comment",a=I.createGroup();if(t.from&&t.to){var s=1*J.maxDepth*U.LINE_WIDTH,c=2*(J.maxDepth-t.depth)*U.LINE_WIDTH;n=e.from-(X.getDims().interEntitySpacing+2*U.LINE_WIDTH)/2-(c-s),o=e.to+(X.getDims().interEntitySpacing+2*U.LINE_WIDTH)/2+(c-s),i="inline_expression_divider"}var u=I.createLine({xFrom:n,yFrom:r,xTo:o,yTo:r},{class:i});return a.appendChild(u),a.appendChild(F(t,e,r)),t.linecolor&&u.setAttribute("style","stroke:"+t.linecolor+";"),a}function B(t,e,r,n){var o=2*J.maxDepth*U.LINE_WIDTH,i=t.to-t.from+X.getDims().interEntitySpacing-2*U.LINE_WIDTH-o,a=t.from-(X.getDims().interEntitySpacing-2*U.LINE_WIDTH-o)/2,s=2*(J.maxDepth-e.depth)*U.LINE_WIDTH;return I.createRect({width:i+2*s,height:r||J.arcRowHeight-2*U.LINE_WIDTH,x:a-s,y:n},"box inline_expression "+e.kind,e.linecolor,e.textbgcolor)}function D(t,e,r,n){var o=2*J.maxDepth*U.LINE_WIDTH,i=t.to-t.from+X.getDims().interEntitySpacing-2*U.LINE_WIDTH-o,a=t.from-(X.getDims().interEntitySpacing-2*U.LINE_WIDTH-o)/2,s=I.createGroup(),c={},u=V.createLabel(e,{x:a,y:r,width:i},n),l=M.getBBox(u),d=Math.max(l.height+2*U.LINE_WIDTH,J.arcRowHeight-2*U.LINE_WIDTH),f={width:i,height:d,x:a,y:r-d/2};switch(e.kind){case"rbox":c=I.createRBox(f,"box rbox",e.linecolor,e.textbgcolor);break;case"abox":c=I.createABox(f,"box abox",e.linecolor,e.textbgcolor);break;case"note":c=I.createNote(f,"box note",e.linecolor,e.textbgcolor);break;default:c=I.createRect(f,"box",e.linecolor,e.textbgcolor)}return s.appendChild(c),s.appendChild(u),s}var I=t("./svgelementfactory/index"),M=t("./svgutensils"),O=t("./renderutensils"),N=t("./renderskeleton"),H=t("../astmassage/flatten"),R=t("./kind2class"),W=t("../astmassage/aggregatekind"),z=t("./rowmemory"),G=t("./idmanager"),q=t("./markermanager"),X=t("./entities"),V=t("./renderlabels"),U=t("./constants"),Y=t("../../lib/lodash/lodash.custom"),Z=3,$=38,K=0,J=Object.seal({arcRowHeight:$,arcGradient:K,arcEndX:0,wordWrapArcs:!1,mirrorEntitiesOnBottom:!1,regularArcTextVerticalAlignment:"middle",maxDepth:0,document:{},layer:{lifeline:{},sequence:{},notes:{},inline:{},watermark:{}}}),Q=[];return{clean:function(t,e){J.document=N.init(e),M.init(J.document),M.removeRenderedSVGFromElement(t)},render:r}}),r("utl/exporter",[],function(){"use strict";function t(t,e,r){return t.pathname+"?lang="+r+"&msc="+encodeURIComponent(e)}function e(e,n,o){return t(e,n,o).length<r}var r=4094;return{toLocationString:function(r,n,o){var i="# source too long for an URL";return e(r,n,o)&&(i=n),t(r,i,o)}}}),r("embedding/config",[],function(){"use strict";function t(t,e){Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]})}var e={defaultLanguage:"mscgen",parentElementPrefix:"mscgen_js-parent_",clickable:!1,clickURL:"https://sverweij.github.io/mscgen_js/",loadFromSrcAttribute:!1};return{getConfig:function(){return"undefined"!=typeof mscgen_js_config&&mscgen_js_config&&"object"==typeof mscgen_js_config&&t(e,mscgen_js_config),e}}}),r("utl/tpl",[],function(){"use strict";return{applyTemplate:function(t,e){var r=t;return e&&Object.keys(e).forEach(function(t){r=r.replace(new RegExp("{"+t+"}","g"),e[t])}),r}}}),r("embedding/error-rendering",["../utl/tpl"],function(t){"use strict";function e(t,e){for(var r=t.toString(),n=e-r.length,o=0;o<n;o++)r=" "+r;return r}function r(t,r){return e(r,3)+" "+t}function n(e,r){return e.split("").reduce(function(e,n,a){return a===r?e+t.applyTemplate(i,{char:o(n)}):e+o(n)},"")}function o(t){return t.replace(/</g,"&lt;")}var i="<span style='text-decoration:underline'>{char}</span>";return{formatNumber:e,deHTMLize:o,renderError:function(e,i,a){var s=Boolean(i)?t.applyTemplate("<pre><div style='color: #d00'># ERROR on line {line}, column {col} - {message}</div>",{message:a,line:i.start.line,col:i.start.column}):t.applyTemplate("<pre><div style='color: #d00'># ERROR {message}</div>",{message:a});return e.split("\n").reduce(function(e,a,s){return i&&s===i.start.line-1?e+t.applyTemplate("<mark>{line}\n</mark>",{line:r(n(a,i.start.column-1),s+1)}):e+o(r(a,s+1))+"\n"},s)+"</pre>"}}}),r("utl/domutl",[],function(){"use strict";return{ajax:function(t,e,r){var n=new XMLHttpRequest;n.onreadystatechange=function(t){t.target.readyState===XMLHttpRequest.DONE&&(200===n.status?e(t):r(t))},n.open("GET",t),n.responseType="text";try{n.send()}catch(t){r(t)}}}}),e(["./lib/mscgenjs-core/parse/xuparser","./lib/mscgenjs-core/parse/msgennyparser","./lib/mscgenjs-core/render/graphics/renderast","./utl/exporter","./embedding/config","./embedding/error-rendering","./utl/domutl","./utl/tpl"],function(t,e,r,n,o,i,a,s){"use strict";function c(){for(var t=document.scripts,e=0;e<t.length;e++)T[t[e].type]&&!t[e].hasAttribute("data-renderedby")&&(t[e].insertAdjacentHTML("afterend",s.applyTemplate(C,{src:t[e].src?s.applyTemplate(k,{src:t[e].src}):"",lang:T[t[e].type]||o.getConfig().defaultLanguage,msc:t[e].textContent.replace(/</g,"&lt;"),mirrorEntities:b(t[e])?"data-mirror-entities='true'":"",namedStyle:y(t[e]),regularArcTextVerticalAlignment:x(t[e])})),t[e].setAttribute("data-renderedby","mscgen_js"))}function u(t,e){for(var r=0;r<t.length;r++)l(t[r],e+r)}function l(t,e){t.hasAttribute("data-renderedby")||f(t,e)}function d(t,e){t.innerHTML=s.applyTemplate("<div style='color: #d00'>{string}</div>",{string:e})}function f(t,e){p(t,e),t.setAttribute("data-renderedby","mscgen_js"),o.getConfig().loadFromSrcAttribute&&t.getAttribute("data-src")?a.ajax(t.getAttribute("data-src"),function(e){h(t,e.target.response)},function(){d(t,s.applyTemplate(A,{url:t.getAttribute("data-src")}))}):!o.getConfig().loadFromSrcAttribute&&t.getAttribute("data-src")?d(t,s.applyTemplate(_,{url:t.getAttribute("data-src")})):h(t,t.textContent)}function h(t,e){var r=m(t),n=w(e,r);n.entities?v(n,t.id,e,r,b(t),y(t),x(t)):t.innerHTML=i.renderError(e,n.location,n.message)}function g(t,e,r){var i={pathname:"index.html"},a=document.createElement("a");return a.setAttribute("href",o.getConfig().clickURL+n.toLocationString(i,t,e)),a.setAttribute("id",r+"link"),a.setAttribute("style","text-decoration: none;"),a.setAttribute("title","click to edit in the mscgen_js interpreter"),a}function p(t,e){t.id||(t.id=o.getConfig().parentElementPrefix+e.toString())}function m(t){var e=t.getAttribute("data-language");return e||(e=o.getConfig().defaultLanguage),e}function b(t){var e=t.getAttribute("data-mirror-entities");return!(!e||"true"!==e)}function y(t){return t.getAttribute("data-named-style")||"basic"}function x(t){return t.getAttribute("data-regular-arc-text-vertical-alignment")||"middle"}function w(r,n){var o={};try{o="msgenny"===n?e.parse(r):"json"===n?JSON.parse(r):t.parse(r)}catch(t){return t}return o}function v(t,e,n,i,a,s,c){var u=document.getElementById(e);u.innerHTML="",!0===o.getConfig().clickable&&(u.appendChild(g(n,i,e)),e+="link"),r.clean(e,window),r.render(t,window,e,{source:n,additionalTemplate:s,mirrorEntitiesOnBottom:a,regularArcTextVerticalAlignment:c})}var C="<span class='mscgen_js' {src} data-language='{lang}' data-named-style='{namedStyle}' data-regular-arc-text-vertical-alignment='{regularArcTextVerticalAlignment}' {mirrorEntities}>{msc}<span>",k="data-src='{src}' ",A="ERROR: Could not find or open the URL '{url}' specified in the <code>data-src</code> attribute.",_="ERROR: Won't load the chart specified in <code>data-src='{url}'</code>, because loading from separate files is switched off in the mscgen_js configuration. <br><br>See <a href='https://sverweij.github.io/mscgen_js/embed.html#loading-from-separate-files'>Loading charts from separate files</a> in the mscgen_js embedding guide how to enable it.",T=Object.freeze({"text/x-mscgen":"mscgen","text/x-msgenny":"msgenny","text/x-xu":"xu"});!function(){c();var t=document.getElementsByClassName("mscgen_js");u(t,0),u(document.getElementsByTagName("mscgen"),t.length)}()}),r("mscgen-inpage",function(){})}();